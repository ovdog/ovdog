<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.useso.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="ov智商捉急" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1">






<meta name="description" content="你猜?">
<meta property="og:type" content="website">
<meta property="og:title" content="ov智商捉急">
<meta property="og:url" content="http://ovjaywang.github.io/page/2/index.html">
<meta property="og:site_name" content="ov智商捉急">
<meta property="og:description" content="你猜?">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ov智商捉急">
<meta name="twitter:description" content="你猜?">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> ov智商捉急 </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container one-collumn sidebar-position-left page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta custom-logo">
  
    <div class="site-meta-headline">
      <a>
        <img class="custom-logo-image" src="/images/touxiang.jpg" alt="ov智商捉急">
      </a>
    </div>
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ov智商捉急</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/me" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sth">
          <a href="/sth" rel="section">
            
              <i class="menu-item-icon fa fa-child fa-fw"></i> <br>
            
            有料
          </a>
        </li>
      
        
        <li class="menu-item menu-item-pic-movie">
          <a href="/a-pic-a-movie" rel="section">
            
              <i class="menu-item-icon fa fa-film fa-fw"></i> <br>
            
            一影一图
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input">
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'ZtWPUvzBjdXDQ7iNrTbW','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/04/pc-phone-communication/" itemprop="url">
                  [汇总]Pc Android iOS传输文件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-01-04T00:35:49+08:00" content="2016-01-04">
              2016-01-04
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/软件测评/" itemprop="url" rel="index">
                    <span itemprop="name">软件测评</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/软件测评/软文/" itemprop="url" rel="index">
                    <span itemprop="name">软文</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/01/04/pc-phone-communication/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/04/pc-phone-communication/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>曾写过一个这个<a href="http://www.dooby.me/?p=473">http://www.dooby.me/?p=473</a></p>
<p>然而时过境迁很多出彩的多客户端文件传输的app已经出来了。。本篇主要提<font color="#FF0000">多客户端的文件无线传输</font>，忽略笔记类和书签类。<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/01/04/pc-phone-communication/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </p></div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/01/Android为毛耗电[2]/" itemprop="url">
                  Android为毛耗电[2]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-01-01T23:32:08+08:00" content="2016-01-01">
              2016-01-01
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/App强推/" itemprop="url" rel="index">
                    <span itemprop="name">App强推</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/App强推/软文/" itemprop="url" rel="index">
                    <span itemprop="name">软文</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/01/01/Android为毛耗电[2]/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/01/Android为毛耗电[2]/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><strong><font size="4" face="华文中宋">本文只讨论安卓手机软节电，不负责推荐底包、rom、调频调压方案，刷机root<font color="#ff0000">后果自负</font>。</font></strong></p>
<font size="4" face="华文中宋">本小节只讨论干货。在root及xposed框架下。同时兼顾不能肉身翻墙又想用google服务的小狗们。本人的使用情况是正常功能照开，google需要gmail和google photo及部分gcm，黑屏开启手势和解锁，正常收微信、闹钟、短信电话外熄屏一切不开，后台常开应用有snap锁屏、grenntify绿色守护、调音的audio mix、天气插件、BBS、输入法、Nova Launcher。测试的环境为Android L 5.1.1</font>

<font size="4" face="华文中宋">&nbsp;<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/01/01/Android为毛耗电[2]/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </font></div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/28/Android为毛耗电[1]/" itemprop="url">
                  Android为毛耗电[1]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-28T23:34:25+08:00" content="2015-12-28">
              2015-12-28
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/App强推/" itemprop="url" rel="index">
                    <span itemprop="name">App强推</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/App强推/软文/" itemprop="url" rel="index">
                    <span itemprop="name">软文</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/28/Android为毛耗电[1]/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/28/Android为毛耗电[1]/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><strong><font color="#000000"></font>**</strong><font color="#000000" size="4"><font face="微软雅黑 Light">本文只讨论安卓手机软节电，不负责推荐底包、rom、调频调压方案，<font color="#ff0000">刷机root后果自负。</font></font></font>**</p>
<font color="#000000" size="4" face="微软雅黑 Light"><strong>纯硬货，只想节电看后文。</strong></font>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/12/28/Android为毛耗电[1]/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/18/后方交会检校(8)/" itemprop="url">
                  后方交会检校(8)--光束法区域平差 Bundle Block Adjustment
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-18T23:17:39+08:00" content="2015-11-18">
              2015-11-18
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/" itemprop="url" rel="index">
                    <span itemprop="name">什么都学一下</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/学习log/" itemprop="url" rel="index">
                    <span itemprop="name">学习log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/18/后方交会检校(8)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/18/后方交会检校(8)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <font size="3">航空摄影最终的目标都是，将某一波段的图像（传感器接收的某一宽度波长的电磁波），在一定范围（地理空间范畴）内融合在一起。原因有：</font><br><br><font size="3">①拍摄的每幅图像幅宽有限（高的分辨率不够低了拍的面积不够多）</font>

<font size="3">②需要研究的区域相对一张或几张照片来说，太太太大了，没有或难以测量地面的标识，就只能靠拼接（然而飞机需要飞行，飞行需要时间，时间就带来光照、镜头本身、飞行姿态等各种变化）</font>

<font size="3">③除了高端的飞机带有精度极高的POS（position &amp; orientation system）能够实时记录飞行的姿态，即飞机的朝向、飞机的地理位置等明确告诉我该用哪个位置的点拼起来的，其他只能依赖，连续两张图片的相关性来拼（这里讲的就是，同名点即tie point）</font>

<p>——航摄大致思路？完成这一工作，最主要的工作是法一：利用地面其他物体的三维坐标（灰机、相机的某一时刻姿态也可以）点确定相邻两幅图像的地理位置（三维的，依赖地理空间的）——&gt;解算相对位置；法二，利用同名点（两幅图像都拍到的点，二维的，不依赖地理空间的），找到某个投影变换（即一个投影矩阵），直接解求两幅相邻图像的相对位置。</p>
<p>&nbsp;</p>
<font size="3">航摄中常用的三种用于加密控制点的方法有<span style="color: #ff0000">航带法、独立模型法、光束法</span>。其中航带法精度较低，不能用于高精度的测量。独立模型法较前者精度略高，光束法则是精度最高同时计算量最大的模型，适用于高精度航摄。</font>

<font size="3">——用来做啥?不同时刻的航摄图片，对绝对位置或相对坐标进行确认，为拼接准备。</font>

<font size="3"><font color="#ff0000">自检较光束</font>则是最广泛应用的做法，尽管<font size="3">粗差（奇葩的大误差）对于精度的影响极大</font>。其基本思想是选用一个由若干个参数组成的系统误差模型，将这些附加参数作为未知数与区域网的其他参数一起解求，从而达到在平差过程中自动消除系统误差的目的。其缺点是①<span style="color: #ff0000">附加参数人为选择</span>，选择不当会导致迭代结果不收敛恶化计算结果。②附加参数与区域网参数一起解求，会使<span style="color: #ff0000">计算量明显上升</span>。</font>

<font size="3"></font>&nbsp;<br><br><font size="3">光束法平差以单个像片作为平差单元（意思就是一个观测值是一个像片，主要包含像片的内外方位元素，它们作为一个整体，就如测量一个高程的值 一个坐标的值一样&nbsp; 在整个区域进行一边计算一边排错 进行平差处理 解算出每张相片的外方位元素 然后按照前方交会计算加密点（不同像片的拍下的重复点 tie point）坐标。</font>

<div class="PoweredByWebStory" style="margin-bottom: 10px; margin-top: 15px"><font size="3">&nbsp;</font></div>

<font size="3"></font>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/09/后方交会检校(7)/" itemprop="url">
                  后方交会检校(7)--后方检校精度的检验
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-09T17:39:06+08:00" content="2015-11-09">
              2015-11-09
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/" itemprop="url" rel="index">
                    <span itemprop="name">什么都学一下</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/学习log/" itemprop="url" rel="index">
                    <span itemprop="name">学习log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/09/后方交会检校(7)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/09/后方交会检校(7)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>后方交会得到的结果，除了使用平差误差表达式来计算之外，还可以通过以下方式进行检验和矫正。</p>
<p>①利用旋转矩阵，使用物放三维数据，反算二维坐标点，比较二者之差。</p>
<p>&nbsp;</p>
<p>②利用多片空间前方交会，通过未参与空间后方交会计算的控制点像点坐标反算理论空间坐标，得出空间坐标的误差。</p>
<p>使用条件：至少2张相片的内方位元素、外方位元素、畸变因子。把待定点的像点坐标作为观测值，逐点求解待定点物方空间坐标的过程。</p>
<p>其步骤与多片空间前方交会也类似，给定初值后，进行逐次迭代运算。误差方程为</p>
<p>&nbsp;</p>
<div class="PoweredByWebStory" style="margin-top:15px;margin-bottom:10px"><a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external"></a>&nbsp;今天你<a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external">菊子曰</a>了么？</div>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/08/2015.11.08安装google 框架 service 一系列/" itemprop="url">
                  [2015.11.08]安装google 框架 Service 一系列
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-08T23:53:53+08:00" content="2015-11-08">
              2015-11-08
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/App强推/" itemprop="url" rel="index">
                    <span itemprop="name">App强推</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/App强推/软文/" itemprop="url" rel="index">
                    <span itemprop="name">软文</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/08/2015.11.08安装google 框架 service 一系列/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/08/2015.11.08安装google 框架 service 一系列/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>装了cm还有其他一些国产ui直接滤掉了google的一系列被墙的服务。</p>
<p>但明明又不可或缺。尤其是最近无可救药的爱上了google相册，那无限制的容量让人流口水。</p>
<p>试了一下各种论坛apk专栏的gms（google mobile service 涉及Android版本 cpu类型 屏幕尺寸，以及各种旧版本都试过了都不行。。我就郁闷了。。</p>
<p><a href="http://www.coolapk.com/apk/com.google.android.gms" target="_blank" rel="external">各版本gms-酷安网</a>&nbsp; &nbsp; <a href="http://www.android-apk.com/zh-cn/2015/02/google-play-store-%E8%88%8A%E7%89%88%E6%9C%AC-apk-%E5%A4%A7%E9%9B%86%E5%90%88/" target="_blank" rel="external">各种旧版本google</a>&nbsp;&nbsp; <a href="http://www.apkmirror.com/?s=google+play+service&amp;post_type=apps_post" target="_blank" rel="external">各种能找到的google相关旧版本</a>&nbsp;&nbsp; <a href="http://sspai.com/30499" target="_blank" rel="external">少数派的小姿势</a></p>
<p>因此试了一下传说中的，Open GApps和TK GApps，非常顺滑。一刷就行，不用双清，放在sd里和刷机一样。</p>
<p>提供了详细列表的<a href="http://forum.xda-developers.com/android/software/tk-gapps-t3116347" target="_blank" rel="external">tk gapps-5.1.X列表</a></p>
<p>同样提供了详细列表的<a href="http://www.androidrootz.com/2015/03/download-android-51x-lollipop-pa-gapps.html" target="_blank" rel="external">PA Gapps-5.1.X列表</a></p>
<p><a href="http://www.technobuzz.net/download-google-apps-gapps/" target="_blank" rel="external">GAPPS FOR ANY ANDROID ROM</a>（提供所有安卓版本的GAPPS安装，我成功的刷入了一台老机子nexus 7 在CM12下。震精的是，居然也提供了6.0和我家一加二的安装-。-，MIUI6也适时的出现了</p>
<p>stock ：最为贴近 Nexus 机型体验的 GApps 版本，包含了 Nexus 机型所预装的所有 Google 服务和 Google 应用。需要注意的是，这个版本会用 Chrome 、 Google Now Launcher 、 Google Keybord 等 Google 应用替换掉 CM 系 ROM 中那些基于 AOSP 代码的相关应用。<br> full ：与 stock 版所包含的内容相同，但不会替换 AOSP 应用。<br> mini ：包含了完整的 Google 服务框架和主流 Google 应用，去掉了 Google Docs 等文档处理应用<br> micro ：包含了完整的 Google 服务框架和少数 Google 应用，如 Gmail 、 Google Calender 、 Google Now Launcher 。<br> nano ：包含完整的 Google 服务框架但不包含多余的 Google 应用。<br> pico：包含了最基础的 Google 服务框架，体积最小，一些依赖完整 Google 框架的应用（如 Google Camera ）将无法运行。</p>
<div class="PoweredByWebStory" style="margin-top:15px;margin-bottom:10px"><a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external"></a>&nbsp;今天你<a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external">菊子曰</a>了么？</div>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/04/uac-involved/" itemprop="url">
                  无人机影像相关--拍摄、校正、平差、拼接
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-04T21:12:46+08:00" content="2015-11-04">
              2015-11-04
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/" itemprop="url" rel="index">
                    <span itemprop="name">什么都学一下</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/学习log/" itemprop="url" rel="index">
                    <span itemprop="name">学习log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/04/uac-involved/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/04/uac-involved/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>无人机在近地拍摄全色或者多光谱数据，进行近景摄影测量，成图为后期的制图反演批处理提供数据来源。一般对像片各项操作，都需要知道像片的<font color="#FF0000">空中姿态及其位置</font>。然而，无人机自身系统受外界干扰较大，飞行姿态难以准确控制，同时缺乏监测飞机姿态的设备，处理无人机数据不能完全采用传统航摄流程进行作业。</p>
<p>关于摄影平台——无人机或带着单数码相机或组合相机，或带着遥感平台。常用的大面阵数码航摄相机，有DMC和UC（UCD UCX UCXp UCE）。DMC由4个全色4个多光谱镜头组成，4个中心投影拼接合成一副具有虚拟投影中心固定虚拟焦距的投影合成影像。UC4个全色波段对应3*3矩阵排列的9个CCD面阵，分别为<font color="#FF0000">4221</font>（分别对应二行左二（东南东北西南西北），二行左一（正南正北），二行左三（正东正西），二行左四（中心））.如下图所示，UC革新的将四个角的镜头设为主镜头（master cone）其他三个为从属镜头（slave cone）为的是控制相机区域，尽量覆盖完整视场角，其他3个镜头的影响依据它进行精确配准保证输出的影响具有强健刚性的严格中心投影。</p>
<p><img src="http://ww3.sinaimg.cn/large/68eb7c93gw1exq55pwc5xj20l30cyjt1.jpg" alt=""></p>
<p>几个全色影像CCD之间存在重叠（航向258旁向262），通过重叠部分<font color="#FF0000">影像精确配准</font>，消除曝光时间带来的误差影响，生成一个完整的中心投影影像。图为四个镜头在不同时刻曝光，最后生成虚拟影像。值得一提的是，UC系统四个镜头虽然在不同时刻曝光拍摄，但是<font color="#FF0000"><strong>选取了合适了速度并沿着第二行相机方向飞行</strong></font>时，每个曝光的相机都几乎在同一时空位置，因此得到的是一个完整的中心投影大幅面全色影像。</p>
<p><img src="http://ww1.sinaimg.cn/large/68eb7c93gw1exq5bny66wj21180koag8.jpg" alt=""></p>
<p>关于数码航摄仪——若采用多相机进行拍摄，扩大VOF（view of field），或采取张大仰角或采取移轴摄影，都需要对多相机进行合成，<font color="#FF0000">组成一张虚拟影像</font>，来达到对后面平差拼接做前期准备，因此精度相当重要。</p>
<p>关于图像拼接——无人机搭载的数码相机虽然提高了影像的分辨率，但焦距有限视野较小，获得整个飞行区域的完整影像设计<font color="#FF0000">像片的拼接问题</font>。影像拼接涉及匀光匀色等色彩处理、对误差较大的图像进行粗提取、采用某些算计对影像提取特征点或者利用空间位置进行拼接等步骤。</p>
<p>这里可以参考的文献有，</p>
<p><a href="http://www.cnki.net/KCMS/detail/detail.aspx?QueryID=2&amp;CurRec=1&amp;recid=&amp;filename=TJDZ201205018&amp;dbname=CJFD2012&amp;dbcode=CJFQ&amp;pr=&amp;urlid=&amp;yx=&amp;uid=WEEvREcwSlJHSldRa1FhalpDTFRFYlpBY0d5OVdscE1hTndUdWJEd0ZyRGtESXlzS2lQZ1pVUkVRNVNOL1VwNmlRPT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!&amp;v=MTk3OTZVTDdKTVNmUGRMRzRIOVBNcW85RWJJUjhlWDFMdXhZUzdEaDFUM3FUcldNMUZyQ1VSTCtlWnVackZDam4=" target="_blank" rel="external">基于光束法自由网平差的无人机影像严格拼接</a>&nbsp;主要总结了航摄基本方法（空三方式利用野外控制点加密测出大量控制点、通过灭点建立影像直线段与方位元素的关系、自检校光束区域平差利用定向参数解求外方位元素、量测直线段长度确定外方位元素、区域平差及SIFT+一定数量控制点针对不同尺度三维影像进行拼接、光束法区域平差+秩亏可以解决缺少控制信息的像片）</p>
<div class="PoweredByWebStory" style="margin-top:15px;margin-bottom:10px"><a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external"></a>&nbsp;今天你<a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external">菊子曰</a>了么？</div>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/04/后方交会检校(6)/" itemprop="url">
                  后方交会检校(6)--后方交会的补充及DLT和角锥体法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-04T15:29:32+08:00" content="2015-11-04">
              2015-11-04
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/" itemprop="url" rel="index">
                    <span itemprop="name">什么都学一下</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/学习log/" itemprop="url" rel="index">
                    <span itemprop="name">学习log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/04/后方交会检校(6)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/04/后方交会检校(6)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>除了后方交会之外，常用的进行内外参数检校的方法还有DLT和角锥体法。</p>
<p>写在前面：DLT可在<font color="#FF0000">未提供初值</font>的情况下推导内外方位元素，同时<font color="#FF0000">不需要迭代</font>，但精度相比后方交会较低；<font color="#FF0000">DLT与后方交会等价</font>。</p>
<p><strong><font color="#FF0000" size="5">内容提要</font></strong></p>
<p><a href="#DLT基本原理与公式">DLT基本原理与公式</a>&nbsp; <a href="#其中">L的基本形式</a>&nbsp;&nbsp;<a href="#根据求得的li计算各参数">用Li表示内外参数</a>&nbsp;</p>
<p><a href="#非正交与比例尺不一致因素">非正交与比例尺不一致因素</a>&nbsp; <a href="#DLT的真正一般形式">DLT的真正一般形式</a>&nbsp; <a href="#包含2项因素的Li表达内外参数">包含2项因素的Li表达内外参数</a>&nbsp;</p>
<p><a href="#包含畸变参数校正的DLT">包含畸变参数校正的DLT</a></p>
<p><a name="DLT基本原理与公式">DLT基本原理与公式</a></p>
<p>基本原理：将物方点坐标（X,Y,Z）和(x,y)看做是空间中的某种线性变换，可以互为函数。一般地，将x,y用X,Y,Z表示。</p>
<p>基本公式：</p>
<p>$$!\left{\begin{matrix}x+\frac{L<em>{1}X+L</em>{2}Y+L<em>{3}Z+L</em>{4}}{L<em>{9}X+L</em>{10}Y+L<em>{11}Z+1}=0\y+\frac{L</em>{5}X+L<em>{6}Y+L</em>{7}Z+L<em>{8}}{L</em>{9}X+L<em>{10}Y+L</em>{11}Z+1}=0\end{matrix}\right.$$</p>
<p>DLT误差方程：</p>
<font color="#FF0000">$$!\begin{pmatrix}v<em>{x}\v</em>{y}\end{pmatrix}=\begin{pmatrix}X&amp;Y&amp;Z&amp;1&amp;0&amp;0&amp;0&amp;0&amp;xX&amp;xY&amp;xZ\0&amp;0&amp;0&amp;0&amp;X&amp;Y&amp;Z&amp;1&amp;yX&amp;yY&amp;yZ\end{pmatrix}\begin{pmatrix}L<em>{1}\L</em>{2}\L<em>{3}\L</em>{4}\L<em>{5}\L</em>{6}\L<em>{7}\L</em>{8}\L<em>{9}\L</em>{10}\L<em>{11}\end{pmatrix}+\begin{pmatrix}l</em>{x}\l_{y}\end{pmatrix}$$</font>

<p>与后方交会一样，若有n个控制点，则A矩阵有2n行。还是利用求改正数的公式求取。</p>
<p>DLT推导过程如下：</p>
<p>根据共线方程的后方交会形式：</p>
<p>$$!x-x<em>{0}+f</em>{x}\frac{a<em>{1}(X-X</em>{s})+b<em>{1}(Y-Y</em>{s})+c<em>{1}(Z-Z</em>{s})}{a<em>{3}(X-X</em>{s})+b<em>{3}(Y-Y</em>{s})+c<em>{3}(Z-Z</em>{s})}=0$$</p>
<p>$$!y-y<em>{0}+f</em>{y}\frac{a<em>{2}(X-X</em>{s})+b<em>{2}(Y-Y</em>{s})+c<em>{2}(Z-Z</em>{s})}{a<em>{3}(X-X</em>{s})+b<em>{3}(Y-Y</em>{s})+c<em>{3}(Z-Z</em>{s})}=0$$</p>
<p>这里，f分为fx和fy，即主距在像空系中这两个分量的投影。因为有的单个ccd xy方向上的大小不一致，即不是正方形。</p>
<p>将X，Y，Z和Xs，Ys，Zs分离，将之看作是摄影中心的变换坐标。</p>
<font color="#FF0000">$$!\left{\begin{matrix}r<em>{1}=-(a</em>{1}X<em>{s}+b</em>{1}Y<em>{s}+c</em>{1}Z<em>{s})\r</em>{2}=-(a<em>{2}X</em>{s}+b<em>{2}Y</em>{s}+c<em>{2}Z</em>{s})\r<em>{3}=-(a</em>{3}X<em>{s}+b</em>{3}Y<em>{s}+c</em>{3}Z_{s})\end{matrix}\right.$$</font>

<p>化简可得</p>
<p>$$!x-x<em>{0}+f</em>{x}\frac{a<em>{1}X+b</em>{1}Y+c<em>{1}Z+r</em>{1}}{a<em>{3}X+b</em>{3}Y+c<em>{3}Z+r</em>{3}}=0$$</p>
<p>$$!y-y<em>{0}+f</em>{y}\frac{a<em>{2}X+b</em>{2}Y+c<em>{2}Z+r</em>{1}}{a<em>{3}X+b</em>{3}Y+c<em>{3}Z+r</em>{3}}=0$$</p>
<p>将x0，y0通分。</p>
<p>$$!x+\frac{(a<em>{1}f</em>{x}-a<em>{3}x</em>{0})X+(b<em>{1}f</em>{x}-b<em>{3}x</em>{0})Y+(c<em>{1}f</em>{x}-c<em>{3}x</em>{0})Z+(r<em>{1}f</em>{x}-r<em>{3}x</em>{0})}{a<em>{3}X+b</em>{3}Y+c<em>{3}Z+r</em>{3}}=0$$</p>
<p>$$!y+\frac{(a<em>{2}f</em>{y}-a<em>{3}y</em>{0})X+(b<em>{2}f</em>{y}-b<em>{3}y</em>{0})Y+(c<em>{2}f</em>{y}-c<em>{3}y</em>{0})Z+(r<em>{2}f</em>{y}-r<em>{3}y</em>{0})}{a<em>{3}X+b</em>{3}Y+c<em>{3}Z+r</em>{3}}=0$$</p>
<p>将X、Y、Z的系数简化为L，即</p>
<p>$$!x+\frac{L<em>{1}X+L</em>{2}Y+L<em>{3}Z+L</em>{4}}{L<em>{9}X+L</em>{10}Y+L_{11}Z+1}=0$$</p>
<p>$$!y+\frac{L<em>{5}X+L</em>{6}Y+L<em>{7}Z+L</em>{8}}{L<em>{9}X+L</em>{10}Y+L_{11}Z+1}=0$$</p>
<p><a name="其中">其中，L为：</a></p>
<font color="#FF0000">$$!L=\begin{bmatrix}L<em>{1}&amp;L</em>{2}&amp;L<em>{3}&amp;L</em>{4}\L<em>{5}&amp;L</em>{6}&amp;L<em>{7}&amp;L</em>{8}\L<em>{9}&amp;L</em>{10}&amp;L<em>{11}&amp;L</em>{12}\end{bmatrix}$$</font>

<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/151C86750F1FFF17ECE621971610488CBAE13A81.jpg" alt=""></p>
<p>该公式表示像点测量坐标与物方点坐标直接的变化，无需内方位元素。从另一个角度看，L矩阵其实是二维坐标通过三次矩阵变换得到的三维坐标，即：</p>
<p>$$!L=\frac{1}{r<em>{3}}\begin{bmatrix}f</em>{x}&amp;0&amp;-x<em>{0}\0&amp;f</em>{y}&amp;-y<em>{0}\0&amp;0&amp;1\end{bmatrix}\begin{bmatrix}a</em>{1}&amp;b<em>{1}&amp;c</em>{1}\a<em>{2}&amp;b</em>{2}&amp;c<em>{2}\a</em>{3}&amp;b<em>{3}&amp;c</em>{3}\end{bmatrix}\begin{bmatrix}1&amp;0&amp;0&amp;X<em>{s}\0&amp;1&amp;0&amp;Y</em>{s}\0&amp;0&amp;1&amp;Z<em>{s}\end{bmatrix}=\frac{1}{r</em>{3}}\begin{bmatrix}f<em>{x}&amp;0&amp;-x</em>{0}\0&amp;f<em>{y}&amp;-y</em>{0}\0&amp;0&amp;1\end{bmatrix}\begin{bmatrix}R&amp;t\0^{T}&amp;1\end{bmatrix}$$</p>
<p>第一个矩阵由内方位元素组成，是辅助坐标和像平面坐标的平移和比例关系；第二个矩阵是外方位元素的角元素，表达物方系和地辅系的坐标旋转关系；第三个矩阵是外方位线元素，表达物方坐标和地辅系坐标的原点平移关系。</p>
<p>由于计算机视觉中使用齐次坐标，即如下形式</p>
<p>$$!\begin{pmatrix}x\y\1\end{pmatrix}=L\begin{pmatrix}X\Y\Z\1\end{pmatrix}=\begin{bmatrix}L<em>{1}&amp;L</em>{2}&amp;L<em>{3}&amp;L</em>{4}\L<em>{5}&amp;L</em>{6}&amp;L<em>{7}&amp;L</em>{8}\L<em>{9}&amp;L</em>{10}&amp;L<em>{11}&amp;L</em>{12}\end{bmatrix}\begin{pmatrix}X\Y\Z\1\end{pmatrix}$$因此形成了上红色式子。</p>
<p><a name="根据求得的li计算各参数">根据求得的li计算各参数</a></p>
<p>重要参数的求解：</p>
<p>$$!r<em>{3}=\frac{1}{(L</em>{9}^{2}+L<em>{10}^{2}+L</em>{11}^{2})^{1/2}}$$</p>
<p>(1)内方位元素</p>
<p>$$!x<em>{0}=-(L</em>{1}L<em>{9}+L</em>{2}L<em>{10}+L</em>{3}L<em>{11})/(L</em>{9}^{2}+<em>{10}^{2}+L</em>{11}^{2})$$</p>
<p>$$!y<em>{0}=-(L</em>{5}L<em>{9}+L</em>{6}L<em>{10}+L</em>{7}L<em>{11})/(L</em>{9}^{2}+<em>{10}^{2}+L</em>{11}^{2})$$</p>
<p>$$!f<em>{x}^{2}=-x</em>{0}^{2}+(L<em>{1}^{2}+L</em>{2}^{2}+L<em>{3}^{2})/(L</em>{9}^{2}+<em>{10}^{2}+L</em>{11}^{2})$$</p>
<p>$$!f<em>{y}^{2}=-y</em>{0}^{2}+(L<em>{4}^{2}+L</em>{5}^{2}+L<em>{6}^{2})/(L</em>{9}^{2}+<em>{10}^{2}+L</em>{11}^{2})$$</p>
<p>$$!f=\frac{1}{2}(f<em>{x}+f</em>{y})$$</p>
<p>(2)外方位角元素</p>
<p>$$!\begin{bmatrix}a<em>{1}&amp;b</em>{1}&amp;c<em>{1}\end{bmatrix}=\frac{1}{f</em>{x}}\begin{bmatrix}\frac{L<em>{1}}{(L</em>{9}^{2}+L<em>{10}^{2}+L</em>{11}^{2})^{1/2}}+a<em>{3}x</em>{0}\frac{L<em>{2}}{(L</em>{9}^{2}+L<em>{10}^{2}+L</em>{11}^{2})^{1/2}}+b<em>{3}x</em>{0}\frac{L<em>{3}}{(L</em>{9}^{2}+L<em>{10}^{2}+L</em>{11}^{2})^{1/2}}+c<em>{3}x</em>{0}\end{bmatrix}$$</p>
<p>$$!\begin{bmatrix}a<em>{2}&amp;b</em>{2}&amp;c<em>{2}\end{bmatrix}=\frac{1}{f</em>{y}}\begin{bmatrix}\frac{L<em>{5}}{(L</em>{9}^{2}+L<em>{10}^{2}+L</em>{11}^{2})^{1/2}}+a<em>{3}y</em>{0}\frac{L<em>{6}}{(L</em>{9}^{2}+L<em>{10}^{2}+L</em>{11}^{2})^{1/2}}+b<em>{3}y</em>{0}\frac{L<em>{7}}{(L</em>{9}^{2}+L<em>{10}^{2}+L</em>{11}^{2})^{1/2}}+c<em>{3}y</em>{0}\end{bmatrix}$$</p>
<p>$$!\begin{bmatrix}a<em>{3}&amp;b</em>{3}&amp;c<em>{3}\end{bmatrix}=\frac{1}{(L</em>{9}^{2}+L<em>{10^{2}}+L</em>{11}^{2})^{1/2}}\begin{bmatrix}L<em>{9}&amp;L</em>{10}&amp;L_{11}\end{bmatrix}$$</p>
<p>可以注意到的是，DLT解求内外方位元素是有次序的，因为外方位元素解求的公式中包含有所有的内方位元素。</p>
<p>$$!\left{\begin{matrix}\varphi =arctan(\frac{a<em>{3}}{c</em>{3}})=arctan(\frac{l<em>{9}}{l</em>{11}})\\omega =arcsin(-b<em>{3})=arcsin(-\frac{l</em>{10}}{l<em>{9}^2+l</em>{10}^{2}+l<em>{11}^{2}})\\kappa =arctan(\frac{b</em>{1}}{b<em>{2}})=arctan(\frac{f</em>{y}[x<em>{0}\frac{L</em>{2}}{(L<em>{9}^{2}+L</em>{10}^{2}+L<em>{11}^{2})^{1/2}}+b</em>{3}]}{f<em>{x}[y</em>{0}\frac{L<em>{6}}{(L</em>{9}^{2}+L<em>{10}^{2}+L</em>{11}^{2})^{1/2}}+b_{3}]})\end{matrix}\right.$$</p>
<p>(3)外方位线元素<br> 则需要根据如下方程解出</p>
<p>$$!a<em>{3}X</em>{s}+b<em>{3}Y</em>{s}+c<em>{3}Z</em>{s}+r_{3}$$</p>
<p>$$!\frac{a<em>{1}f</em>{x}-a<em>{3}x</em>{0}}{r<em>{3}}X</em>{s}+\frac{b<em>{1}f</em>{x}-b<em>{3}x</em>{0}}{r<em>{3}}Y</em>{s}+\frac{c<em>{1}f</em>{x}-c<em>{3}x</em>{0}}{r<em>{3}}+L</em>{4}=0$$</p>
<p>$$!\frac{a<em>{2}f</em>{y}-a<em>{3}y</em>{0}}{r<em>{3}}X</em>{s}+\frac{b<em>{2}f</em>{y}-b<em>{3}y</em>{0}}{r<em>{3}}Y</em>{s}+\frac{c<em>{2}f</em>{y}-c<em>{3}y</em>{0}}{r<em>{3}}+L</em>{8}=0$$</p>
<p>&nbsp;</p>
<p>DLT实质上与共线方程等价，Li之间的相关性，因为2个条件=11个参数-必要观测个数</p>
<hr>
<p>以上是只解求内外方位元素的时候，Li与各参数的关系，如果加上光学畸变、非正交比例、比例尺不一致等误差，光学畸变在前文中提到。</p>
<p>x轴方向上比例系数为1，y轴方向比例系数为(1+ds).则</p>
<p>x轴方向上的主距为fx，y轴方向上的主距为fy=fx/(1+ds).</p>
<p>对数字相机，比例尺不一致可认为是襄垣x、y方向长度不等引起的；而不正交性误差可认为是像元x、y方向排列不垂直引起的。</p>
<p><a name="非正交与比例尺不一致因素">如图展现了以上两种误差的原因。</a></p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/C99CDEAA218715286FA9FE07A8E69B343C345FAA.jpg" alt=""></p>
<p>以下表述中，小括号代表坐标系，中括号代表坐标值。</p>
<p>$$!(\overline{x},\overline{y})[on<em>{2},on</em>{1}]$$——以像主点为原点（像平面坐标系的原点），不包含线性误差的<font color="#FF0000">某像点p的坐标</font></p>
<p>$$!(x,y)[om<em>{2},0m</em>{1}]$$——以像主点为原点，不包含正交性dβ误差的像点p坐标。</p>
<p>$$!(x,y)[om<em>{2},om</em>{1}^{‘}]$$——以像主点为原点，不包括正交性dβ误差及比例尺不一致误差ds的像点坐标p</p>
<p>则从图中可知，$$!\delta x=on<em>{2}-om</em>{2}=m<em>{2}p\cdot sin d\beta=om</em>{1}\cdot sin d\beta=(1+ds)(y-y<em>{0})sind\beta\approx (y-y</em>{0})sind\beta$$</p>
<p>$$!\delta y=on<em>{1}-om</em>{1}^{‘}=om<em>{1}\cdot cosd\beta -om</em>{1}^{‘}=(1+ds)(y-y<em>{0})\cdot cosd\beta-(y-y</em>{0})=<a href="y-y_{0}">(1+ds)\cdot cosd\beta -1</a>\approx (y-y_{0})\cdot ds$$</p>
<p>将上式2值带入线性方程<font color="#FF0000">有线性误差的形式</font>：式中有11个独立参数，3个内方位x0,yo,fx6个外方位Xs，Ys，Zs，φ，ω，k，比例尺不一致系数ds，xy轴不正交系数dβ。</p>
<p>$$!\left{\begin{matrix}x-x<em>{0}+(1+ds)(y-y</em>{0})\cdot sind\beta +f<em>{x}\frac{a</em>{1}(X-X<em>{s}+b</em>{1}(Y-Y<em>{s})+c</em>{1}(Z-Z<em>{s})}{a</em>{3}(X-X<em>{s})+b</em>{3}(Y-Y<em>{s})+c</em>{3}(Z-Z<em>{s})}=0\y-y</em>{0}+[(1+ds)\cdot cosd\beta-1] (y-y<em>{0})+f</em>{x}\frac{a<em>{1}(X-X</em>{s}+b<em>{1}(Y-Y</em>{s})+c<em>{1}(Z-Z</em>{s})}{a<em>{3}(X-X</em>{s})+b<em>{3}(Y-Y</em>{s})+c<em>{3}(Z-Z</em>{s})}=0\end{matrix}\right.$$</p>
<p>通过一系列的化简，如前面介绍不带线性误差一样，提取出r1，r2，r3，<a name="DLT的真正一般形式">得到：</a></p>
<p>$$!x+\frac{\frac{1}{r<em>{3}}(a</em>{1}f<em>{x}-a</em>{2}f<em>{x}tand\beta -a</em>{3}x<em>{0})}{\frac{a</em>{3}}{r<em>{3}}X+\frac{b</em>{3}}{r<em>{3}}Y+\frac{c</em>{3}}{r<em>{3}}Z+1}\cdot X+\frac{\frac{1}{r</em>{3}}(b<em>{1}f</em>{x}-b<em>{2}f</em>{x}tand\beta -b<em>{3}x</em>{0})}{\frac{a<em>{3}}{r</em>{3}}X+\frac{b<em>{3}}{r</em>{3}}Y+\frac{c<em>{3}}{r</em>{3}}Z+1}\cdot Y+\frac{\frac{1}{r<em>{3}}(c</em>{1}f<em>{x}-c</em>{2}f<em>{x}tand\beta -c</em>{3}x<em>{0})}{\frac{a</em>{3}}{r<em>{3}}X+\frac{b</em>{3}}{r<em>{3}}Y+\frac{c</em>{3}}{r<em>{3}}Z+1}\cdot Z+\frac{\frac{1}{r</em>{3}}(r<em>{1}f</em>{x}-r<em>{2}f</em>{x}tand\beta -r<em>{3}x</em>{0})}{\frac{a<em>{3}}{r</em>{3}}X+\frac{b<em>{3}}{r</em>{3}}Y+\frac{c<em>{3}}{r</em>{3}}Z+1}=0$$</p>
<p>$$!y+\frac{\frac{1}{r<em>{3}}[\frac{a</em>{2}f<em>{x}}{(1+ds)cosd\beta }-a</em>{3}\cdot y<em>{0}]}{\frac{a</em>{3}}{r<em>{3}}X+\frac{b</em>{3}}{r<em>{3}}Y+\frac{c</em>{3}}{r<em>{3}}Z+1}\cdot X+\frac{\frac{1}{r</em>{3}}[\frac{b<em>{2}f</em>{x}}{(1+ds)cosd\beta }-b<em>{3}\cdot y</em>{0}]}{\frac{a<em>{3}}{r</em>{3}}X+\frac{b<em>{3}}{r</em>{3}}Y+\frac{c<em>{3}}{r</em>{3}}Z+1}\cdot Y+\frac{\frac{1}{r<em>{3}}[\frac{c</em>{2}f}{(1+ds)cosd\beta }-c<em>{3}\cdot y</em>{0}]}{\frac{a<em>{3}}{r</em>{3}}X+\frac{b<em>{3}}{r</em>{3}}Y+\frac{c<em>{3}}{r</em>{3}}Z+1}\cdot Z+\frac{\frac{1}{r<em>{3}}[\frac{r</em>{2}f<em>{x}}{(1+ds)cosd\beta }-r</em>{3}\cdot y<em>{0}]}{\frac{a</em>{3}}{r<em>{3}}X+\frac{b</em>{3}}{r<em>{3}}Y+\frac{c</em>{3}}{r_{3}}Z+1}=0$$</p>
<p>则上式即可化为基本式：</p>
<p>$$!x+\frac{l<em>{1}X+l</em>{2}Y+l<em>{3}Z+l</em>{4}}{l<em>{9}X+l</em>{10}Y+l_{11}Z+1}=0$$</p>
<p>$$!y+\frac{l<em>{5}X+l</em>{6}Y+l<em>{7}Z+l</em>{8}}{l<em>{9}X+l</em>{10}Y+l_{11}Z+1}=0$$</p>
<p>其中，l4、l8可化简：</p>
<p>$$!l<em>{8}=\frac{1}{r</em>{3}}[\frac{r<em>{2}f</em>{x}}{(1+ds)\cdot d\beta}-r<em>{3}\cdot y</em>{0}]=\frac{1}{r<em>{3}}[\frac{-(a</em>{2}Xs+b<em>{2}Y</em>{s}+c<em>{2}Z</em>{s})f<em>{x}}{(1+ds)\cdot cosd\beta }+(a</em>{3}X<em>{s}+b</em>{3}Y<em>{s}+c</em>{3}Z<em>{s})\cdot y</em>{0}]=-\frac{1}{r<em>{3}}[(\frac{a</em>{2}f<em>{x}}{(1+ds)\cdot cosd\beta }-a</em>{3}y<em>{0})X</em>{s}+(\frac{b<em>{2}f</em>{x}}{(1+ds)\cdot cosd\beta }-b<em>{3}y</em>{0})Y<em>{s}+(\frac{c</em>{2}f<em>{x}}{(1+ds)\cdot cosd\beta }-c</em>{3}y<em>{0})Z</em>{s}]=-(l<em>{5}X</em>{s}+l<em>{6}Y</em>{s}+l<em>{7}Z</em>{s})$$</p>
<p>$$!l<em>{4}=\frac{1}{r</em>{3}}(r<em>{1}f</em>{x}-r<em>{2}f</em>{x}tand\beta -r<em>{3}x</em>{0})=-(l<em>{1}X</em>{s}+l<em>{2}Y</em>{s}+l<em>{3}Z</em>{s})$$</p>
<p>由于未知数是11个，因此最少需要布置6个控制点。</p>
<p>值得一提的是，像主点的求解公式与没有畸变参与<a name="包含2项因素的Li表达内外参数">相同</a>，</p>
<p>$$!x<em>{0}=-(L</em>{1}L<em>{9}+L</em>{2}L<em>{10}+L</em>{3}L<em>{11})/(L</em>{9}^{2}+<em>{10}^{2}+L</em>{11}^{2})$$</p>
<p>$$!y<em>{0}=-(L</em>{5}L<em>{9}+L</em>{6}L<em>{10}+L</em>{7}L<em>{11})/(L</em>{9}^{2}+<em>{10}^{2}+L</em>{11}^{2})$$</p>
<p>最重要的ds和dβ，设：</p>
<p>$$!\overline{A}=r<em>{3}^{2}(l</em>{1}^{2}+l<em>{2}^{2}+l</em>{3}^{2})-x<em>{0}^{2}=\frac{f</em>{x}^{2}}{cos^{2}d\beta }$$</p>
<p>$$!B=r<em>{3}^{2}(l</em>{5}^{2}+l<em>{6}^{2}+l</em>{7}^{2})-y<em>{0}^{2}=\frac{f</em>{x}^{2}}{(1+ds)^{2}cos^{2}d\beta }$$</p>
<p>$$!C=r<em>{3}^{2}(l</em>{1}l<em>{5}+l</em>{2}l<em>{6}+l</em>{3}l<em>{7})-x</em>{0}y<em>{0}=\frac{-f</em>{x}^{2}sind\beta }{(1+ds)cos^{2}d\beta }$$</p>
<p>$$!ds=\sqrt{\frac{\overline{A}}{B}-1}$$</p>
<p>$$!sind\beta =\pm \sqrt{\frac{C^{2}}{\overline{A}B}}$$</p>
<p>而主距的公式变为：</p>
<p>$$!f_{x}=\sqrt{\overline{A}}cosd\beta $$</p>
<p>$$!f<em>{y}=\frac{f</em>{x}}{1+ds}$$</p>
<p>外方位角元素：</p>
<p>$$!tan\varphi =\frac{a<em>{3}}{c</em>{3}}$$</p>
<p>$$!sin\omega =-b_{3}$$</p>
<p>$$!tan\kappa =\frac{b<em>{1}}{b</em>{2}}$$</p>
<p>其中，$$a<em>{3}=r</em>{3}l<em>{9},b</em>{3}=r<em>{3}l</em>{10},c<em>{3}=r</em>{3}l_{11}$$</p>
<p>而外方位线元素由以下三个式子构成：</p>
<p>$$!l<em>{1}X</em>{s}+l<em>{2}Y</em>{s}+l<em>{3}Z</em>{s}=-l_{4}$$</p>
<p>$$!l<em>{5}X</em>{s}+l<em>{6}Y</em>{s}+l<em>{7}Z</em>{s}=-l_{8}$$</p>
<p>$$!l<em>{9}X</em>{s}+l<em>{10}Y</em>{s}+l<em>{11}Z</em>{s}=\frac{a<em>{3}}{r</em>{3}}X<em>{s}+\frac{b</em>{3}}{r<em>{3}}Y</em>{s}+\frac{c<em>{3}}{r</em>{3}}Z<em>{s}=-\frac{a</em>{3}Xs+b<em>{3}Y</em>{s}+c<em>{3}Z</em>{s}}{a<em>{3}Xs+b</em>{3}Y<em>{s}+c</em>{3}Z_{s}}=-1$$</p>
<p>到这里，能解求出包含非正交比例和xy不一致比例，但缺乏了对镜头畸变的改正。若将镜头畸变写入DLT方程式，则变为：</p>
<p>$$!x+v<em>{x}+\Delta x+\frac{l</em>{1}X+l<em>{2}Y+l</em>{3}Z+l<em>{4}}{l</em>{9}X+l<em>{10}Y+l</em>{11}Z+1}=0$$</p>
<p>$$!y+v<em>{y}+\Delta y+\frac{l</em>{5}X+l<em>{6}Y+l</em>{7}Z+l<em>{8}}{l</em>{9}X+l<em>{10}Y+l</em>{11}Z+1}=0$$</p>
<p>其中，vx vy是残差，△x △y是畸变的改正数，若忽略切向畸变且只去一项径向畸变的参数作为例子，</p>
<p>$$!\left{\begin{matrix}\Delta x=(x-x<em>{0})r^{2}k</em>{1}\\Delta y=(y-y<em>{0})r^{2}k</em>{1}\end{matrix}\right.$$</p>
<p>再令$$A=l<em>{9}X+l</em>{10}Y+l_{11}Z+1$$</p>
<p>以li为未知数，列误差方程，则DLT<a name="包含畸变参数校正的DLT">公式可化简为</a>：</p>
<p>$$!v<em>{x}=-\frac{1}{A}[Xl</em>{1}+Yl<em>{2}+Zl</em>{3}+l<em>{4}+xXl</em>{9}+xYl<em>{10}+xZl</em>{11}+A(x-x<em>{0}^{2})r^{2}k</em>{1}+x]$$</p>
<p>$$!v<em>{y}=-\frac{1}{A}[Xl</em>{5}+Yl<em>{6}+Zl</em>{7}+l<em>{8}+yXl</em>{9}+yYl<em>{10}+yZl</em>{11}+A(y-y<em>{0}^{2})r^{2}k</em>{1}+x]$$</p>
<p>矩阵的形式则可写为（以物方坐标表示像点坐标）：</p>
<font color="#FF0000">$$!\begin{bmatrix}v<em>{x}\v</em>{y}\end{bmatrix}=\begin{bmatrix}\frac{X}{A}&amp;\frac{Y}{A}&amp;\frac{Z}{A}&amp;\frac{1}{A}&amp;0&amp;0&amp;0&amp;0&amp;\frac{xX}{A}&amp;\frac{xY}{A}&amp;\frac{xZ}{A}&amp;(x-x<em>{0})r^{2}\0&amp;0&amp;0&amp;0&amp;\frac{X}{A}&amp;\frac{Y}{A}&amp;\frac{Z}{A}&amp;\frac{1}{A}&amp;\frac{yX}{A}&amp;\frac{yY}{A}&amp;\frac{yZ}{A}&amp;(y-y</em>{0})r^{2}\end{bmatrix}\begin{bmatrix}l<em>{1}\l</em>{2}\l<em>{3}\l</em>{4}\l<em>{5}\l</em>{6}\l<em>{7}\l</em>{8}\l<em>{9}\l</em>{10}\l<em>{11}\k</em>{1}\end{bmatrix}-\begin{bmatrix}\frac{x}{A}\\frac{y}{A}\end{bmatrix}$$</font>

<p>可简写为:</p>
<p>$$!V=AL+BX-W$$</p>
<p>其中L是11个（二维DLT是可能是8个）li参数，X是单独提出来计算的畸变系数，在后交时通常加载改正数值里，当学要加入更多畸变参数时，需要确定更多的B矩阵中的形式。W一般是x/A,y/A.</p>
<p>A和B的求取也是迭代计算，每次迭代A的值计算是通过控制点求得的。对不同控制点像点坐标列误差方程，A的值也不同。</p>
<p>简单提一下以像方坐标表示物放坐标的DLT公式：</p>
<p>$$!(l<em>{1}+\overline{x}l</em>{9})X+(l<em>{2}+\overline{x}l</em>{10})Y+(l<em>{3}+\overline{x}l</em>{11})Z+(l_{4}+\overline{x})=0$$</p>
<p>$$!(l<em>{5}+\overline{y}l</em>{9})X+(l<em>{6}+\overline{y}l</em>{10})Y+(l<em>{7}+\overline{y}l</em>{11})Z+(l_{8}+\overline{y})=0$$</p>
<p>直接线性变换的精度：可提供1/5000摄影距离精度的测量成果。影响DLT解法精度的是：控制点分布数量质量、像点坐标的测量精度、两张相片主光轴的交会角、像片张数、非线性畸变误差的改正数。</p>
<div class="PoweredByWebStory" style="margin-top:15px;margin-bottom:10px"><a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external"></a>&nbsp;今天你<a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external">菊子曰</a>了么？</div>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/04/后方交会检校(5)/" itemprop="url">
                  后方交会检校(5)--相对绝对定向
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-04T12:00:00+08:00" content="2015-11-04">
              2015-11-04
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/" itemprop="url" rel="index">
                    <span itemprop="name">什么都学一下</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/学习log/" itemprop="url" rel="index">
                    <span itemprop="name">学习log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/04/后方交会检校(5)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/04/后方交会检校(5)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="#多片交会">多片检校方程</a>&nbsp;<a href="#相对定向完成标志">相对定向完成标志</a>&nbsp;&nbsp;<a href="#两种方式">相对定向解答的两种方式</a>&nbsp;<a href="#图解">图解连续像片和单独像对</a></p>
<p>单片检校主要目的是精确测量相机的内方位元素和检校相机镜头畸变。由于只使用一幅影像进行参数的解算，使用了较少的几何约束条件和观测值，最容易产生内方位元素x0 y0 与外方位元素Xs Ys的不定解或强相关，使检校结果稳定性和可靠性受到影响。多片后方交会则可以更精确的解算这些参数，尤其是<font color="#FF0000">主点位置的精度</font>问题。多片空间后方交会与单片空间后方交会的根本区别是：在不同的位置拍摄多张照片，由于各像片在同一主距条件下拍摄，因而解算所得的各相片的<font color="#FF0000">外方位元素不同</font>，解算的<font color="#FF0000">内方位元素和畸变参数被认为相同</font>。</p>
<p>这样，就可以用下式方程表达<a name="多片交会">多片交会</a>：</p>
<p>$$!\begin{bmatrix}A<em>{I}&amp;0&amp;\cdot&amp;\cdot&amp;\cdot&amp;0&amp;B</em>{I}&amp;C<em>{I}\0&amp;A</em>{II}&amp;.&amp;.&amp;.&amp;0&amp;B<em>{II}&amp;C</em>{II}\.&amp;.&amp; &amp; &amp; &amp;0&amp;.&amp;.\.&amp;.&amp; &amp; &amp; &amp;0&amp;.&amp;.\0&amp;.&amp;.&amp;.&amp;.&amp;A<em>{n}&amp;B</em>{n}&amp;C<em>{n}\end{bmatrix}</em>{2n\times (6n+7)}\begin{bmatrix}X<em>{out</em>{I}}\X<em>{out</em>{II}}\.\.\.\X<em>{out</em>{n}}\X<em>{in}\X</em>{res}\end{bmatrix}<em>{(6n+7)\times1}-\begin{bmatrix}xy</em>{res 1}\xy<em>{res 2}\.\.\.\xy</em>{res n}\end{bmatrix}_{2\times1}=0$$</p>
<p>这一点与图像配准极其相似，用一副影像作为参考影像去配准多幅图像的结果显然没有用周边多幅图像组为参考标准的结果令人信服。由于每张相片的外方位元素不同（一般都是围绕检校场左中右进行拍摄），所以良好的消除了外方位元素和内方位元素的强相关性。</p>
<p>针对多片，提出了相对定向和绝对定向的概念，绝对定向即利用共线方程检校计算出的外方位元素绝对值，这是以物方坐标系的原点作为参考值；而相对定向则是以被检校出的某一张像片为参考，计算出其余像片在其坐标系的坐标值，即相对关系。相对关系的求取的精度对图像拼接有至关重要的影像。</p>
<p><a name="相对定向完成标志"><font color="#FF0000">相对定向完成的标志</font></a>：同名光线对对相交。所有点在其承影面上的上下视差为零。即通过矩阵变换改变投影器的相对位置，使光线相交。<font color="#FF0000">&nbsp;&nbsp;&nbsp;</font></p>
<p><a name="两种方式"><font color="#FF0000">相对定向有两种方式</font></a>：①根据单片分别解算出的不同像片（可以使同相机可以不同）物方坐标系下的外方位元素绝对值，计算相对定向的五个元素，By,Bz,φ2，ω2，k2;或多片解算的某一相机的物方绝对值（必须统一相机，保证内方位元素相同），同样计算相对定向元素。可以作为航拍的连续拍摄的相对方位的确定，也可以作为立体固定的某些相机之间的相对方位的确定②直接根据同名点的像点坐标（6组以上），计算相对定向的旋转矩阵[R|t]，<font color="#FF0000">不需要地面控制点！</font>。</p>
<p><a name="图解">图解①方式的连续像对和单独像对</a></p>
<p>上面提到的连续像对，如下图所示，By Bz决定了摄影基线（即摄影中心移动的向量），φ2，ω2，k2决定了右片光束对于左光束的旋转。固定一个光束，旋转和移动第二个，便可以确定两个光束之间的相对方位，第三张相片可以和第二张相片确定相对方位，一次类推，所形成的相对方位元素称为连续像对系统。</p>
<p><img src="http://ww4.sinaimg.cn/large/68eb7c93gw1eyb8jft5rpj20ln0fmgoj.jpg" alt=""></p>
<p>而单独相对，即可以取左片摄影中心XZ平面为主核面，摄影基线为X轴的右手空间直角坐标系。由φ1，ω1，k1,φ2，ω2，k2组成。</p>
<p><img src="http://ww3.sinaimg.cn/large/68eb7c93gw1eyb93i6vwcj20lg0d0dii.jpg" alt=""></p>
<p>&nbsp;</p>
<p>相对定向共面条件</p>
<p>在相对定向中，答解相对元素的重要依据就是共面条件，当光线相交时，易知B（摄影基线，即S1S2）,S1a1,S2a2共面。如图可以看到，解求相对定向元素就是解求两个摄影中心的像方辅助坐标系的转换。共面条件方程形式为：</p>
<p>$$!\overrightarrow{S<em>{1}S</em>{2}}\cdot (\overrightarrow{S<em>{1}a</em>{1}}\times \overrightarrow{S<em>{2}a</em>{2}})=0$$</p>
<p>共面条件方程无需地面控制点，一个同名点列一个方程。必须有5个以上定向点。</p>
<p><img src="http://ww4.sinaimg.cn/large/68eb7c93gw1eyb9drztouj20lz0ig782.jpg" alt=""></p>
<p>如图，设像点a1、a2在大地坐标系坐标分别为(X1,Y1,Z1)、(X2,Y2,Z2).摄站S1、S2在大地坐标系坐标分别为$$(X<em>{S1},Y</em>{S1},Z<em>{S1}),(X</em>{S2},Y<em>{S2},Z</em>{S2})$$,则上式在即可表示为向量形式的行列式。</p>
<p>$$!\begin{vmatrix}X<em>{S2}-X</em>{S1}&amp;Y<em>{S2}-Y</em>{S1}&amp;Z<em>{S2}-Z</em>{S1}\X<em>{1}-X</em>{S1}&amp;Y<em>{1}-Y</em>{S1}&amp;Z<em>{1}-Z</em>{S1}\X<em>{2}-X</em>{S2}&amp;Y<em>{2}-Y</em>{S2}&amp;Z<em>{2}-Z</em>{S2}\end{vmatrix}$$</p>
<p>又令(X,Y,Z)、(Bx,By,Bz)为a1,S2在S1的像辅系S1-XYZ中的坐标，(X’,Y’,Z’)为a2在S2像辅系S2-XYZ中的坐标。由三点共面的方程，</p>
<p>$$!\begin{vmatrix}B<em>{X}&amp;B</em>{Y}&amp;B_{Z}\X&amp;Y&amp;Z\X’&amp;Y’&amp;Z’\end{vmatrix}=0$$上式可改写为：</p>
<p>$$!\begin{bmatrix}B<em>{X}&amp;B</em>{Y}&amp;B_{Z}\end{bmatrix}\begin{bmatrix}0&amp;-Z&amp;Y\Z&amp;0&amp;-X\-Y&amp;X&amp;0\end{bmatrix}\begin{bmatrix}X’\Y’\Z’\end{bmatrix}=0$$</p>
<p>光线是否成对相交与摄影测量坐标系的选择无关，但可以<font color="#FF0000">选择适当的像辅系</font>，改变共面条件便于实际应用。</p>
<p>（1）<font color="#FF0000">选择左侧像空系</font>——连续像对系统。此时R1=E，即左系的旋转矩阵为0，像平面的z坐标均为-f；或为右片的旋转矩阵。则，公式未改变。</p>
<p>$$!\begin{vmatrix}B<em>{X}&amp;B</em>{Y}&amp;B_{Z}\X&amp;Y&amp;Z\X’&amp;Y’&amp;Z’\end{vmatrix}=0$$</p>
<p>（2）选择基线坐标系——单独像对系统。此时，$$B<em>{Y}=B</em>{Z}=0$$，即需要求取两个像片对基线坐标系的旋转。</p>
<div class="PoweredByWebStory" style="margin-top:15px;margin-bottom:10px"><a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external"></a>&nbsp;今天你<a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external">菊子曰</a>了么？</div>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/28/后方交会检校(4)/" itemprop="url">
                  后方交会检校(4)--畸变差矫正
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-28T21:19:08+08:00" content="2015-10-28">
              2015-10-28
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/" itemprop="url" rel="index">
                    <span itemprop="name">什么都学一下</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/学习log/" itemprop="url" rel="index">
                    <span itemprop="name">学习log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/28/后方交会检校(4)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/28/后方交会检校(4)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>为毛要做畸变差矫正?</p>
<p>单片检校主要目的是精确测量相机的内方位元素和检校相机镜头畸变。而多片后方交会则可以更精确的解算这些参数，还可以同时在平差中解求各个物方测量点的精确估值，也可以利用这些大容量的信息进行基于空间位置的组合镜头多片拼接和航带拼接。本篇主要介绍多片后方交会的应用。</p>
<p> 航摄中常用的三种用于加密控制点的方法有<span style="COLOR: #ff0000">航带法、独立模型法、光束法</span>。其中航带法精度较低，不能用于高精度的测量。独立模型法较前者精度略高，光束法则是精度最高同时计算量最大的模型，适用于高精度航摄。<br> 但粗差同样对于精度的影响极大，自检较光束则是最广泛应用的做法。其基本思想是选用一个由若干个参数组成的系统误差模型，将这些附加参数作为未知数与区域网的其他参数一起解求，从而达到在平差过程中自动消除系统误差的目的。其缺点是①<span style="COLOR: #ff0000">附加参数人为选择</span>，选择不当会导致迭代结果不收敛恶化计算结果。②附加参数与区域网参数一起解求，会使<span style="COLOR: #ff0000">计算量明显上升</span>。</p>
<div class="PoweredByWebStory" style="margin-top:15px;margin-bottom:10px"><a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external"></a>&nbsp;今天你<a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external">菊子曰</a>了么？</div>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/28/后方交会检校(3)/" itemprop="url">
                  后方交会检校(3)--角度、坐标及其应用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-28T19:55:49+08:00" content="2015-10-28">
              2015-10-28
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/" itemprop="url" rel="index">
                    <span itemprop="name">什么都学一下</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/学习log/" itemprop="url" rel="index">
                    <span itemprop="name">学习log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/28/后方交会检校(3)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/28/后方交会检校(3)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本片涉及前文中叙述到的三个角元素含义及外延，包含与角元素相关的旋转矩阵R并简明介绍几个常用坐标系。</p>
<p>内容提要：</p>
<p><a href="#几个概念：">几个概念</a>（视场 像场 视场角）&nbsp;</p>
<p><a href="#几个坐标系">几个坐标系</a></p>
<p><a href="#共线方程的推导">共线方程的推导</a></p>
<p>&nbsp;<a href="#坐标旋转即共线方程的应用">坐标旋转即共线方程的应用</a></p>
<p><a href="#坐标旋转">坐标旋转</a></p>
<p><a href="#像片水平与倾斜像点坐标的关系">像片水平与倾斜像点坐标的关系</a></p>
<font size="5"><strong><a name="几个概念：">几个概念：</a></strong></font>&nbsp;<br><br>视场：光线通过物镜后，焦面上照度不均匀的光亮圆为镜头的视场。<br><br>像场：摄影时，影像相当清晰的一部分视场内的光亮圆。<br><br>视场角（filed of view）：由镜头后节点向市场边缘射出的光线所张开的角，用2β表示。常角&lt;75&deg;，宽角75&deg;~100&deg;，特宽角&gt;100&deg;<br><br><img src="http://www.dooby.me/wp-content/uploads/2015/11/E31B0C36B248ADD81D8147EE808E68085B42914E.jpg" alt=""><br><br>数码相机的瞬时视场角IFOV与空间分辨率的关系：$$R_{g}=2\sqrt{2}IFOV$$<br><br><font size="5"><strong><a name="几个坐标系">几个坐标系：</a></strong></font>

<font color="#FF0000">像素坐标系</font>-2D-IAJ以像片左上角为坐标原点，下为y正，右为x正。坐标一般用(u,v)表示。<br><br>$$x=J\Delta -x<em>{0}$$,$$y=-(I\Delta -y</em>{0})$$<br><br><img src="http://www.dooby.me/wp-content/uploads/2015/11/6E6CFB3A2924474655DD2222F8223CABE46AD6FC.jpg" alt=""><br><br>这里，值得一提的是，坐标单位一般是像素。而一般以中心为基准的坐标系（像平面坐标系，一般用(x,y)表示的单位是毫米。这两个坐标系之间的转换公式形式可以写为:<br><br>$$!\left{\begin{matrix}u=\frac{x}{d<em>{x}}+u</em>{0}=x<em>s<em>{x+u</em>{0}}\v=\frac{y}{d<em>{y}}+v</em>{0}=y</em>s<em>{y}+v</em>{0}\end{matrix}\right.$$<br><br>这里，dx dy分别代表每个像素在横轴x和纵轴y的物理尺寸，单位是mm per pixel。而sx和sy分别是二者的导数。或可以用矩阵的形式：<br><br>$$!\begin{pmatrix}u\v\1\end{pmatrix}=\begin{pmatrix}s<em>{x}&amp;0&amp;c</em>{x}\0&amp;s<em>{y}&amp;c</em>{y}\0&amp;0&amp;1\end{pmatrix}\begin{pmatrix}x\y\1\end{pmatrix}$$<br><br><font color="#FF0000">像空间坐标系</font>-3D-Sxyz表示<font color="#FF0000">像点</font>在<font color="#FF0000">像方空间</font>位置的空间直角坐标系。原点即投影中心，xy轴分别平行于像平面xy轴，z轴即主光轴的方向。在该坐标系中，所有像点的z坐标都是-f。几何含义就是，投影中心在投向焦平面的时候，与设计上认为的像点（像平面几何中心）相比，投偏了多少。像平面坐标+内方位元素就可以定位所有穿过像平面到达物放世界的光束的形状；该坐标系的方位就代表了像片的空间方位，像空间坐标系绕原点的旋转就代表了像片绕投影中心的旋转。下图中S为投影中心，O为投影中心，a为任意一个像点，其坐标为(x,y,-f)<br><br><img src="http://www.dooby.me/wp-content/uploads/2015/11/B91663ACDA13BB74808431E1CBA1F9DEB72AAA10.jpg" alt=""><br><br><font color="#FF0000">物方空间坐标系</font>-3D-O-XdYdZd测绘系统选择一定的原点，进行测绘测量的世界真实坐标，描述点的空间位置。摄影测量的成果最终要转到该坐标系中。<br><br>地面辅助坐标系-3D-O-XtYtZt 一般称地辅系，<font color="#FF0000">Z轴铅锤，X Y轴与物空系平行</font>。在摄影测量中，<font color="#FF0000">原点都默认设为摄影中心S</font>。因此该坐标系<font color="#FF0000">与物空系不需要进行旋转，只需要平移</font>，即坐标轴加减运算。这是中间成果和数学运算常用的坐标系。下图是地辅系、像空系、像平面坐标系在一起的示意图。而共线方程就是依据这几个坐标系空间转换得到的。原理为三角形相似。<br><br><img src="http://www.dooby.me/wp-content/uploads/2015/11/13598A8CB4E7FDBD56C5B595E2AD0624D9A2FD14.jpg" alt=""><br><br><font color="#FF0000">像素坐标系→像平面坐标系（内方位元素）</font>

<font color="#FF0000">地面辅助坐标系→像平面坐标系（外方位元素）</font>

<p>共线方程的物理含义就是三点一线，两点一系（理想状况下，摄影瞬间像点、投影中心位于同一直线。）如图所示：</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/1AF795ADEC60BCB2F0396B5F841F4844E636A283.jpg" alt=""></p>
<p>图中浅蓝色坐标系是<font color="#00FFFF"><u>地辅系</u></font>（这里 地辅系通过投影中心 连接物空系和像空系），a点是像平面上的投影，A点是地面控制点，红色坐标系是<font color="#FF0000"><u>物方空间坐标系</u></font>，黄色坐标是<font color="#FFC800"><u>像空系</u></font>（像空系垂直与像平面），λ即投影比例尺，二维坐标各自成比例，形成了共线方程的最基本形式。也可以用向量的方式来解释。其中Xs &nbsp;Ys&nbsp; Zs是投影中心在物方空间的坐标，$$X<em>{A}&nbsp; Y</em>{A}&nbsp; Z_{A}$$是真实世界某控制点的物方坐标。两者相减，即得到相对位置，即地辅系的坐标。该方程是<font color="#FF0000"><strong>建立在地辅系上</strong></font>的。</p>
<p><strong><a name="共线方程的推导">共线方程的推导</a></strong></p>
<p>→<strong>点的坐标变换</strong>（一点两系）：目标是建立同一个点在空间坐标系与地面辅助坐标系中坐标值之间的对应关系。坐标点一般的转换关系为：</p>
<p>$$!\begin{pmatrix}X\Y\Z\end{pmatrix}=R\begin{pmatrix}x\y\z\end{pmatrix}$$</p>
<p>$$!\begin{pmatrix}x\y\z\end{pmatrix}=R^{T}\begin{pmatrix}X\Y\Z\end{pmatrix}$$</p>
<p>则R称为旋转矩阵。</p>
<p>点a、A位于两个坐标系，分别用两组坐标来表示。S-xyz示意像空系，S-XYZ示意地辅系。</p>
<table width="80%" border="0"> <tbody> <tr> <td width="26%">点\坐标系</td> <td width="26%">S-xyz</td> <td width="26%">S-XYZ</td> </tr> <tr> <td width="26%">a</td> <td width="26%">x,y,-f</td> <td width="26%">Xa，Ya，Za</td> </tr> <tr> <td width="26%">A</td> <td width="26%">xA,yA,zA</td> <td width="26%">X,Y,Z</td> </tr> </tbody> </table>

<p>由于旋转矩阵相同，两个点可表示为：</p>
<p>$$!\begin{pmatrix}X\Y\Z\end{pmatrix}=R\begin{pmatrix}x<em>{A}\y</em>{A}\z_{A}\end{pmatrix}$$</p>
<p>$$!\begin{pmatrix}X<em>{a}\Y</em>{a}\Z_{a}\end{pmatrix}=R\begin{pmatrix}x\y\-f\end{pmatrix}$$</p>
<p>则，$$!\begin{pmatrix}x<em>{A}\y</em>{A}\z_{A}\end{pmatrix}=R^{T}\begin{pmatrix}X\Y\Z\end{pmatrix}$$</p>
<p>→点的共线关系（两点一系）：目标是建立像点和物方点的坐标关系。易知，两点一线时，可以用一个点的齐次方程表示另一个点。即：</p>
<p>$$!\left{\begin{matrix}x<em>{A}=a</em>{1}X+b<em>{1}Y+c</em>{1}Z\y<em>{A}=a</em>{2}X+b<em>{2}Y+c</em>{2}Z\y<em>{A}=a</em>{3}X+b<em>{3}Y+c</em>{3}Z\end{matrix}\right.$$</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/7238D8A7EF534575B5EE48B9CCA41FF8E4903B6C.jpg" alt=""></p>
<p>上图中可建立的方程有，（该方程建立在像空系中）</p>
<p>$$!\frac{x<em>{A}}{x}=\frac{y</em>{A}}{y}=\frac{z<em>{A}}{-f}=\lambda \Rightarrow\left{\begin{matrix}x=-f\frac{x</em>{A}}{z<em>{A}}\y=-f\frac{y</em>{A}}{z_{A}}\end{matrix}\right.$$</p>
<p>联立坐标转换方程和像空系方程，化简即可得到传说中的共线条件方程。</p>
<p>用<font color="#FF0000">地面点</font>坐标表示<font color="#FF0000">像点</font>坐标的共线方程（地辅系形式）</p>
<p>$$!x=-f\frac{a<em>{1}(X</em>{T}-X<em>{S})+b</em>{1}(Y<em>{T}-Y</em>{S})+c<em>{1}(Z</em>{T}-Z<em>{S})}{a</em>{3}(X<em>{T}-X</em>{S})+b<em>{3}(Y</em>{T}-Y<em>{S})+c</em>{3}(Z<em>{T}-Z</em>{S})}$$</p>
<p>$$!y=-f\frac{a<em>{2}(X</em>{T}-X<em>{S})+b</em>{2}(Y<em>{T}-Y</em>{S})+c<em>{2}(Z</em>{T}-Z<em>{S})}{a</em>{3}(X<em>{T}-X</em>{S})+b<em>{3}(Y</em>{T}-Y<em>{S})+c</em>{3}(Z<em>{T}-Z</em>{S})}$$</p>
<p>或（物空系形式）</p>
<p>$$!x=-f\frac{a<em>{1}(X-X</em>{S})+b<em>{1}(Y-Y</em>{S})+c<em>{1}(Z-Z</em>{S})}{a<em>{3}(X-X</em>{S})+b<em>{3}(Y-Y</em>{S})+c<em>{3}(Z-Z</em>{S})}$$</p>
<p>$$!y=-f\frac{a<em>{2}(X-X</em>{S})+b<em>{2}(Y-Y</em>{S})+c<em>{2}(Z-Z</em>{S})}{a<em>{3}(X-X</em>{S})+b<em>{3}(Y-Y</em>{S})+c<em>{3}(Z-Z</em>{S})}$$</p>
<p>同理，利用蓝图中在地辅系的共线方程，可以建立用<font color="#FF0000">像点</font>坐标表达<font color="#FF0000">地面坐标</font>的方程（物空系形式）</p>
<p>$$!X=X<em>{s}+(Z-Z</em>{s})\frac{a<em>{1}x+a</em>{2}y-a<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}$$</p>
<p>$$!Y=Y<em>{s}+(Z-Z</em>{s})\frac{b<em>{1}x+b</em>{2}y-b<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}$$</p>
<p>上式也成为了前方交会解算的基本方程。</p>
<hr>
<p><strong><a name="坐标旋转即共线方程的应用">坐标旋转即共线方程的应用</a></strong></p>
<p>①<strong>求像点坐标</strong></p>
<ul>
<li>已知Xs Ys Zs ai bi ci f(物方真值 旋转矩阵)</li>
<li>求x y（像平面坐标）</li>
</ul>
<p>依赖方程：</p>
<p>$$!x=-f\frac{a<em>{1}(X-X</em>{S})+b<em>{1}(Y-Y</em>{S})+c<em>{1}(Z-Z</em>{S})}{a<em>{3}(X-X</em>{S})+b<em>{3}(Y-Y</em>{S})+c<em>{3}(Z-Z</em>{S})}$$</p>
<p>$$!y=-f\frac{a<em>{2}(X-X</em>{S})+b<em>{2}(Y-Y</em>{S})+c<em>{2}(Z-Z</em>{S})}{a<em>{3}(X-X</em>{S})+b<em>{3}(Y-Y</em>{S})+c<em>{3}(Z-Z</em>{S})}$$</p>
<p>②<strong>答解外方位元素</strong>(后方交会基本原理)</p>
<ul>
<li>已知$$x<em>{i}^{‘} y</em>{i}^{‘} X<em>{i} Y</em>{i} Z<em>{i} x</em>{0} y_{0} f$$（像坐标观测值 物方观测值 内方位元素）</li>
<li>求Xs Ys Zs ai bi ci（外方位元素）</li>
</ul>
<p>依赖方程：</p>
<p>$$!x^{‘}-x<em>{0}=-f\frac{a</em>{1}(X-X<em>{S})+b</em>{1}(Y-Y<em>{S})+c</em>{1}(Z-Z<em>{S})}{a</em>{3}(X-X<em>{S})+b</em>{3}(Y-Y<em>{S})+c</em>{3}(Z-Z_{S})}$$</p>
<p>$$!y^{‘}-y<em>{0}=-f\frac{a</em>{2}(X-X<em>{S})+b</em>{2}(Y-Y<em>{S})+c</em>{2}(Z-Z<em>{S})}{a</em>{3}(X-X<em>{S})+b</em>{3}(Y-Y<em>{S})+c</em>{3}(Z-Z_{S})}$$</p>
<p>③<strong>求地面点坐标</strong></p>
<ul>
<li>已知x，y，Xs，Ys，Zs，ai，bi，ci，f(外方位元素，像点坐标观测值，焦距)</li>
<li>求X，Y，Z（求未知物方点坐标,这里，大部分都知道DEM，即(X,Y)坐标下的Z高程的信息）</li>
</ul>
<p>依赖方程(单片定位)：</p>
<p>$$!\frac{X-X<em>{S}}{Z-Z</em>{S}}=\frac{a<em>{1}x+a</em>{2}y-a<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}$$</p>
<p>$$!\frac{Y-Y<em>{S}}{Z-Z</em>{S}}=\frac{b<em>{1}x+b</em>{2}y-b<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}$$</p>
<p>依赖方程（立体像对定位）–4个方程解算3个未知数。(前方交会后方交会同时进行)</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/5F3074FF98FA07ED1F357962C68FF593E047311B.jpg" alt=""></p>
<p>$$!\frac{X-X<em>{S}}{Z-Z</em>{S}}=\frac{a<em>{1}x+a</em>{2}y-a<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}$$</p>
<p>$$!\frac{Y-Y<em>{S}}{Z-Z</em>{S}}=\frac{b<em>{1}x+b</em>{2}y-b<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}$$</p>
<p>$$!\frac{X-X<em>{S}^{‘}}{Z-Z</em>{S}^{‘}}=\frac{a<em>{1}^{‘}x^{‘}+a</em>{2}^{‘}y^{‘}-a<em>{3}^{‘}f}{c</em>{1}^{‘}x^{‘}+c<em>{2}^{‘}y^{‘}-c</em>{3}^{‘}f}$$</p>
<p>$$!\frac{Y-Y<em>{S}^{‘}}{Z-Z</em>{S}^{‘}}=\frac{b<em>{1}^{‘}x^{‘}+b</em>{2}^{‘}y^{‘}-b<em>{3}^{‘}f}{c</em>{1}^{‘}x^{‘}+c<em>{2}^{‘}y^{‘}-c</em>{3}^{‘}f}$$</p>
<hr>
<p><a name="坐标旋转">坐标旋转</a></p>
<p>从物方空间坐标系到像空间坐标系的转换其实就是一个<font color="#FF0000">平移</font>（平移到地辅系）再<font color="#FF0000">旋转</font>的过程，这就是常见的[R|t]。旋转真正的含义就是对3个坐标轴作二维角度上的旋转，3个旋转合成一个旋转矩阵R。坐标轴旋转θ角度，等同于目标点绕坐标原点反方向旋转同样的角度θ。选择的旋转3个坐标系的方式有很多，常用的就是以Y轴为主轴的φ，ω,k的系统。</p>
<p><strong>航向倾角φ</strong>（pitching）：z轴在<font color="#FF0000">XZ坐标面内的投影</font>（即过z轴所做的XZ面的垂面与XZ面的交线）<font color="#FF0000">与Z轴的夹角</font>，叫做航向倾角。从Z轴算起，由Y轴的负方向逆时针为正。如图为正。</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/98B5D21FDF0802661E47A2C3089CF683E856F014.jpg" alt=""></p>
<p><strong>旁向倾角ω</strong>（roll）：z轴与XZ坐标面之间的夹角，即z轴与它在XZ面上投影之间的夹角，叫做旁向倾角。从z轴的投影算起，由X轴的正方向看逆时针为正。如图为正。</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/5A4A8734E57C7C288466AFAF21FE3D1DA7F17C1B.jpg" alt=""></p>
<p><strong>像片旋角k</strong>（yaw）：Y轴在xy坐标系面上的投影与y轴的夹角，叫做旋角。从投影算起，由z轴正方向看逆时针为正。如图k为正。</p>
<ul>
<li>二维平面的坐标旋转</li>
</ul>
<p>如图所示，旋转是可逆变化，两套坐标之间可以用矩阵和逆矩阵进行转换。</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/9C02C1C63C5D098E97E8A04FBBDFB60F02221B34.jpg" alt=""></p>
<p>$$!\begin{bmatrix}x^{‘}\y^{‘}\end{bmatrix}=A\begin{bmatrix}x\y\end{bmatrix},\begin{bmatrix}x\y\end{bmatrix}=A^{-1}\begin{bmatrix}x^{‘}\y^{‘}\end{bmatrix}$$</p>
<p>$$!A=\begin{bmatrix}a<em>{1}&amp;a</em>{2}\b<em>{1}&amp;b</em>{2}\end{bmatrix}=\begin{bmatrix}cos \widehat{x^{‘}x}&amp;cos \widehat{x^{‘}y}\cos\widehat{y^{‘}x}&amp;cos \widehat{y^{‘}y}\end{bmatrix}=\begin{bmatrix}cos \kappa&amp;sin \kappa\-sin \kappa&amp;cos\kappa\end{bmatrix}$$</p>
<p>式中</p>
<p>a1是x’轴与x轴夹角的余弦；a1=cos k</p>
<p>b1是x’轴与y轴夹角的余弦：b1=cos(90&deg;-k)=sin k</p>
<p>a2是y’轴与x轴夹角的余弦：a2=cos(90&deg;+k)=-sin k</p>
<p>b2是y’轴与y轴夹角的余弦：b2=cos k</p>
<ul>
<li>三维空间的坐标旋转</li>
</ul>
<p>从像空间直角坐标系到像空间辅助坐标系之间的转换可以通过<font color="#FF0000">三次二维坐标转换完成</font>。</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/A203A33F40A9904D7EA2D966CB486C277511405E.jpg" alt=""></p>
<p>$$!\begin{bmatrix}X\Y\Z\end{bmatrix}=R\begin{bmatrix}x\y\-f\end{bmatrix}$$</p>
<p>$$!R=\begin{bmatrix}a<em>{1}&amp;a</em>{2}&amp;a<em>{3}\b</em>{1}&amp;b<em>{2}&amp;b</em>{3}\c<em>{1}&amp;c</em>{2}&amp;c_{3}\end{bmatrix}=\begin{bmatrix}cos\widehat{Xx}&amp;cos\widehat{Xy}&amp;cos\widehat{Xz}\cos\widehat{Yx}&amp;cos\widehat{Yy}&amp;cos\widehat{Yz}\cos\widehat{Zx}&amp;cos\widehat{Zy}&amp;cos\widehat{Zz}\end{bmatrix}$$</p>
<p>①S-XYZ<font color="#FF0000">绕Y轴旋转φ</font>到S-XφYφZφ，在XSZ平面内，以S点位圆心旋转XSZ至XφSZφ</p>
<p>$$!\begin{bmatrix}X\Y\Z\end{bmatrix}=R<em>{\varphi}\begin{bmatrix}X</em>{\varphi }\Y<em>{\varphi }\Z</em>{\varphi }\end{bmatrix}=\begin{bmatrix}cos\varphi&amp;0&amp;-sin\varphi\0&amp;1&amp;0\sin\varphi&amp;0&amp;cos\varphi\end{bmatrix}\begin{bmatrix}X<em>{\varphi }\Y</em>{\varphi }\Z_{\varphi }\end{bmatrix}$$</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/6F2D6EC82C1793253C32825B3180B3F84A68D11B.jpg" alt=""></p>
<p>该次变换中，由于是绕Y轴旋转的，因此Y坐标值没有改变，相当于在二维XSZ平面做了旋转，下同。</p>
<p>②S-XφYφZφ绕Xφ旋转ω角到S-XφωYφωZφω，在YφSZφ平面内，以S点为圆心旋转YφSZφ到YφωSZφω。这次变化中，x轴坐标值没有改变。</p>
<p>$$!\begin{bmatrix}X<em>{\varphi}\Y</em>{\varphi}\Z<em>{\varphi}\end{bmatrix}=R</em>{\omega}\begin{bmatrix}X<em>{\varphi\omega}\Y</em>{\varphi \omega}\Z<em>{\varphi\omega}\end{bmatrix}=\begin{bmatrix}1&amp;0&amp;0\0&amp;cos \omega&amp;-sin \omega\0&amp;sin \omega&amp;cos \omega \end{bmatrix}\begin{bmatrix}X</em>{\varphi\omega}\Y<em>{\varphi \omega}\Z</em>{\varphi\omega}\end{bmatrix}$$</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/3669611136A21AC23885E7932C6D17D84AEC1C27.jpg" alt=""></p>
<p>③S-XφωYφωZφω绕Zφω轴旋转k角度到S-xyz，在XφSYω平面内，以S点为圆心转到XφωSYφω至xSy。</p>
<p>$$!\begin{bmatrix}X<em>{\varphi\omega}\Y</em>{\varphi\omega}\Z<em>{\varphi\omega}\end{bmatrix}=R</em>{\kappa}\begin{bmatrix}x\y\-f\end{bmatrix}=\begin{bmatrix}cos \kappa&amp;-sin \kappa&amp;0\sin \kappa&amp;cos \kappa&amp;0\0&amp;0&amp;1\end{bmatrix}\begin{bmatrix}x\y\-f\end{bmatrix}$$</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/3C453D9DA7CF479D4624D8465171F8FAF1F9E701.jpg" alt=""></p>
<p>联立之前三个旋转矩阵即可得到三维下的旋转矩阵R</p>
<p>$$!\begin{bmatrix}X\Y\Z\end{bmatrix}=R<em>{\varphi}R</em>{\omega}R<em>{\kappa}\begin{bmatrix}x\y\-f\end{bmatrix}=\begin{bmatrix}cos\varphi&amp;0&amp;-sin\varphi\0&amp;1&amp;0\sin\varphi&amp;0&amp;cos\varphi\end{bmatrix}\begin{bmatrix}1&amp;0&amp;0\0&amp;cos \omega&amp;-sin \omega\0&amp;sin \omega&amp;cos \omega \end{bmatrix}\begin{bmatrix}cos \kappa&amp;-sin \kappa&amp;0\sin \kappa&amp;cos \kappa&amp;0\0&amp;0&amp;1\end{bmatrix}\begin{bmatrix}x\y\-f\end{bmatrix}=\begin{bmatrix}a</em>{1}&amp;a<em>{2}&amp;a</em>{3}\b<em>{1}&amp;b</em>{2}&amp;b<em>{3}\c</em>{1}&amp;c<em>{2}&amp;c</em>{3} \end{bmatrix}\begin{bmatrix}x\y\-f\end{bmatrix}=R\begin{bmatrix}x\y\-f\end{bmatrix}$$</p>
<p>旋转矩阵R因此由外方位元素φ，ω，k确定。其中a1,a2,a3,b1,b2,b3,c1,c2,c3是9个方向的<font color="#FF0000">方向余弦</font>。</p>
<p>$$!a_{1}=cos\varphi cos\kappa-sin\varphi sin\omega sin\kappa$$</p>
<p>$$!a_{2}=-cos\varphi sin\kappa -sin\varphi sin\omega cos\kappa$$</p>
<p>$$!a_{3}=-sin\varphi cos\omega$$</p>
<p>$$!b_{1}=cos\omega sin\kappa$$</p>
<p>$$!b_{2}=cos\omega cos\kappa$$</p>
<p>$$!b_{3}=-sin\omega$$</p>
<p>$$!c_{1}=sin\varphi cos\kappa+cos\varphi sin\omega sin\kappa $$</p>
<p>$$!c_{2}=-sin\varphi sin\kappa +cos\varphi sin\omega cos\kappa $$</p>
<p>$$!c_{3}=cos\varphi cos\omega $$</p>
<p>通过解算可知</p>
<p>$$!R\cdot R^{T}=\begin{bmatrix}a<em>{1}&amp;a</em>{2}&amp;a<em>{3}\b</em>{1}&amp;b<em>{2}&amp;b</em>{3}\c<em>{1}&amp;c</em>{2}&amp;c<em>{3} \end{bmatrix}\cdot \begin{bmatrix}a</em>{1}&amp;b<em>{1}&amp;c</em>{1}\a<em>{2}&amp;b</em>{2}&amp;c<em>{2}\a</em>{3}&amp;b<em>{3}&amp;c</em>{3}\end{bmatrix}=\begin{bmatrix}1&amp;0&amp;0\0&amp;1&amp;0\0&amp;0&amp;1\end{bmatrix}$$</p>
<p>$$!R^{T}\cdot R =\begin{bmatrix}a<em>{1}&amp;b</em>{1}&amp;c<em>{1}\a</em>{2}&amp;b<em>{2}&amp;c</em>{2}\a<em>{3}&amp;b</em>{3}&amp;c<em>{3}\end{bmatrix}\cdot \begin{bmatrix}a</em>{1}&amp;a<em>{2}&amp;a</em>{3}\b<em>{1}&amp;b</em>{2}&amp;b<em>{3}\c</em>{1}&amp;c<em>{2}&amp;c</em>{3} \end{bmatrix}=\begin{bmatrix}1&amp;0&amp;0\0&amp;1&amp;0\0&amp;0&amp;1\end{bmatrix}$$</p>
<p>很明显，意味着R与$$R^{T}$$互为逆矩阵。这也验证了R矩阵是两个坐标系之间相互转换的矩阵。由$$RR^{T}=I$$可得：</p>
<p>（1）同行（列）列的各元素自乘之和为1</p>
<p>（2）任意两行（列）的对应元素相乘之和为0（正交）</p>
<p>（3）旋转矩阵行列式为|R|=1</p>
<p>（4）每行元素等于其代数余子式</p>
<p>（5）每个元素为变换前后坐标轴夹角的余弦值<br> 易知</p>
<p>$$!\varphi =-arctan(\frac{a<em>{3}}{c</em>{3}}),\omega =-arcsin(b<em>{3}),\kappa =-arctan(\frac{b</em>{1}}{b_{2}})$$</p>
<p>$$!a<em>{1}^{2}+a</em>{2}^{2}+a<em>{3}^{2}=1,b</em>{1}^{2}+b<em>{2}^{2}+b</em>{3}^{2}=1,c<em>{1}^{2}+c</em>{2}^{2}+c_{3}^{2}=1$$</p>
<p>$$!a<em>{1}b</em>{1}+a<em>{2}b</em>{2}+a<em>{3}b</em>{3}=0,a<em>{1}c</em>{1}+a<em>{2}c</em>{2}+a<em>{3}c</em>{3}=0,b<em>{1}c</em>{1}+b<em>{2}c</em>{2}+b<em>{3}c</em>{3}=0$$</p>
<p>$$!a<em>{1}^{2}+b</em>{1}^{2}+c<em>{1}^{2}=1,a</em>{2}^{2}+b<em>{2}^{2}+c</em>{2}^{2}=1,a<em>{3}^{2}+b</em>{3}^{2}+c_{3}^{2}=1$$</p>
<p>$$!a<em>{1}a</em>{2}+b<em>{1}b</em>{2}+c<em>{1}c</em>{2}=0,a<em>{1}a</em>{3}+b<em>{1}b</em>{3}+c<em>{1}c</em>{3}=0,a<em>{2}a</em>{3}+b<em>{2}b</em>{3}+c<em>{2}c</em>{3}=0$$</p>
<font size="+0"><strong><a name="像片水平与倾斜像点坐标的关系">像片水平与倾斜像点坐标的关系</a></strong></font>。（这里，以摄影中心<font color="#FF0000">S点为像片旋转中心</font>，因此外方位元素中，<font color="#FF0000">主距依旧是f</font>，<font color="#FF0000">线元素没有改变</font>）<br><br>已知：外方位元素Xs Ys Zs φ ω k(即九个方向余弦)<br><br><font color="#FF0000">对于某高程</font>，摄影中心在该高程Z方向的投影N坐标为(Xs,Ys,Zs-$$H_{N}$$)–<font color="#FF0000">物方坐标系</font>

<p><font color="#FF0000">对于某高程</font>，摄影中心在该高程的垂线与像平面的交点n坐标为$$(-f\frac{c<em>{1}}{c</em>{3}},-f\frac{c<em>{2}}{c</em>{3}})$$–<font color="#FF0000">像方坐标</font>，可将上点带入共线条件方程后方交会求得↓↓↓</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/A1BBA5EFFED4F68C01CF47FBC61FC4FA7087739E.jpg" alt=""></p>
<p>又根据共线方程前方交会公式，在水平图像的平面上，物方任意点A(X,Y,Z)-（物方坐标）在像平面的成像点a为$$(x^{0},y^{0})$$-（像平面坐标）或$$(x^{0},y^{0},-f)$$像空间坐标系。↓↓↓</p>
<p><img src="http://www.dooby.me/wp-content/uploads/2015/11/3C7C83AD827FB7A7BD4108090804ED13131E82D7.jpg" alt=""></p>
<p>值得注意的是，主光轴正好是垂直于大地水平面，所以，地辅系与像空系只需要在XSY平面上旋转即可。</p>
<p>在倾斜形态中，由像点表示物方点坐标点的公式为：</p>
<p>$$!\frac{X-X<em>{S}}{Z-Z</em>{S}}=\frac{a<em>{1}x+a</em>{2}y-a<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}$$</p>
<p>$$!\frac{Y-Y<em>{S}}{Z-Z</em>{S}}=\frac{b<em>{1}x+b</em>{2}y-b<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}$$</p>
<p>在垂直形态中，三个角元素严格为0，因次带入之前的矩阵公式得到：</p>
<p>a1=1 a2=0 a3=0 b1=0 b2=1 b3=0 c1=0 c2=0 c3=1</p>
<p>$$!\frac{X-X<em>{S}}{Z-Z</em>{S}}=\frac{x^{0}}{-f}$$</p>
<p>$$!\frac{Y-Y<em>{S}}{Z-Z</em>{S}}=\frac{y^{0}}{-f}$$</p>
<p>其中$$x^{0},y^{0}$$分别表示水平状态的像点坐标。</p>
<p>上两式的外方位角元素不同，而线元素是相同的。因此联立可得<font color="#FF0000">水平纠正的基本公式</font>：</p>
<p>$$!\left{\begin{matrix}x^{0}=-f\frac{a<em>{1}x+a</em>{2}y-a<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}\y^{0}=-f\frac{b<em>{1}x+b</em>{2}y-b<em>{3}f}{c</em>{1}x+c<em>{2}y-c</em>{3}f}\end{matrix}\right.$$</p>
<p>&nbsp;</p>
<div class="PoweredByWebStory" style="margin-top:15px;margin-bottom:10px"><a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external"></a>&nbsp;今天你<a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external">菊子曰</a>了么？</div>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/12/后方交会检校(2)/" itemprop="url">
                  后方交会检校(2)--误差方程及各项系数解求及精度
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-12T17:16:52+08:00" content="2015-10-12">
              2015-10-12
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/" itemprop="url" rel="index">
                    <span itemprop="name">什么都学一下</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/学习log/" itemprop="url" rel="index">
                    <span itemprop="name">学习log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/12/后方交会检校(2)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/12/后方交会检校(2)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><br>上文中明确了两个式子：</p>
<p>$$\left{\begin{matrix}\frac{f}{\overline{Z}}dXs+\frac{x}{\overline{Z}}dZs-(f+\frac{x^{2}}{f})d\varphi-\frac{xy}{f}d\omega+yd\kappa -\frac{f}{\overline{Z}}dX-\frac{x}{\overline{Z}}dZ+\frac{x}{f}df+dx<em>{0}-(x-x</em>{cal})=0\\\frac{f}{\overline{Z}}dYs+\frac{y}{\overline{Z}}dZs -\frac{xy}{f}d\varphi-(f+\frac{x^{2}}{f})d\omega-xd\kappa -\frac{f}{\overline{Z}}dX-\frac{y}{\overline{Z}}dZ+\frac{y}{f}df+dy<em>{0}-(y-y</em>{cal})=0\end{matrix}\right.$$</p>
<p> 上式即称为<font color="#FF0000">线性化的共线方程</font>。</p>
<p>$$\left{\begin{matrix}\frac{f}{\overline{Z}}dXs+\frac{x}{\overline{Z}}dZs-(f+\frac{x^{2}}{f})d\varphi-\frac{xy}{f}d\omega+yd\kappa -\frac{f}{\overline{Z}}dX-\frac{x}{\overline{Z}}dZ+\frac{x}{f}df+dx<em>{0}-(x-x</em>{cal})=v<em>{x}\\\frac{f}{\overline{Z}}dYs+\frac{y}{\overline{Z}}dZs -\frac{xy}{f}d\varphi-(f+\frac{x^{2}}{f})d\omega-xd\kappa -\frac{f}{\overline{Z}}dX-\frac{y}{\overline{Z}}dZ+\frac{y}{f}df+dy</em>{0}-(y-y<em>{cal})=v</em>{y}\end{matrix}\right.$$</p>
<p>上式则称为<font color="#FF0000">误差方程</font>。</p>
<p>这里面$$-(x-x<em>{Cal})$$即<strong>每一步计算后的值与实际测量值的差</strong>，在平差计算过程中，多余的观测数据就是为了进行平差计算获得更精确更均匀的结果。分别命名为$-l</em>{x}$和$-l_{y}$.一个控制点物方坐标和一个像点坐标组成的两个方程也就有两个误差方程，误差方程的基本公式为</p>
<p>$$V=AX-L$$</p>
<p>有的地方也写为</p>
<p>$$V=A\Delta -L$$</p>
<p> 其中V代表误差矩阵，X是待求解的每个元素的改正数矩阵，L是x-x计 y-y计的矩阵。</p>
<p>通常，不会解算物方空间的坐标，同时加入对畸变系数的解算和矫正(将在第四篇提到)，将X分为$X<em>{in}$、$X</em>{out}$、$X_{distortion}$，则上式变形为</p>
<p>$$V=AX<em>{out}+BX</em>{in}+CX<em>{distortion}-(xy)</em>{res}$$</p>
<p>其中，A B C都是各项未知数的系数，$$xy_{res}$$是像点坐标的误差</p>
<p>$$\left{\begin{matrix}x<em>{res}=x-x</em>{cal}+x<em>{dis}\y</em>{res}=y-y<em>{cal}+y</em>{dis}\end{matrix}\right.$$</p>
<p>其中，右边三项分别为像点观测坐标，像点计算坐标，畸变误差。<br> 在后方交会时，当只计算外方位元素时：</p>
<p> $$V<em>{2n\times 1}=A</em>{2n\times6}X<em>{6\times1}-L</em>{2n\times1}$$.</p>
<p> 其中，式子每两行具体为</p>
<p>$$\begin{bmatrix}v<em>{x}\v</em>{y}\end{bmatrix}=\begin{bmatrix}\frac{f}{\overline{Z}}&amp;0&amp;\frac{x}{\overline{Z}}&amp;-(f+\frac{x^{2}}{f})&amp;-\frac{xy}{f}&amp;y\0&amp;\frac{f}{\overline{Z}}&amp;\frac{y}{\overline{Z}}&amp;-\frac{xy}{f}&amp;-(f+\frac{y^{2}}{f})&amp;-x\end{bmatrix}\begin{bmatrix}dXs\dYs\dZs\d\varphi\d\omega\d\kappa\end{bmatrix}-\begin{bmatrix}l<em>{x}\l</em>{y}\end{bmatrix}$$</p>
<p>若要求出V方程的最佳估计值，在摄影测量中，一般按照最小二乘原理进行解答，即<font color="#FF0000"><strong>$$V^{T}V=min$$</strong></font>这就转化为了对该式求极值的问题。</p>
<p>$$V^{T}V=(AX-L)^{T}(AX-L)=X^{T}A^{T}AX-2X^{T}A^{T}L+L^{T}L\Rightarrow \frac{\partial V^{T}V}{\partial X}=2A^{T}AX-2A^{T}L=0$$</p>
<p>上式中大X的含义是待求解的每个元素的残差矩阵包含了Xs Ys Zs Ω φ k，而不是实际测量三维点坐标X。此外，推导过程中对$V^{T}V$求导，则可得到对应6个残差的最佳估计值。这个过程称为误差方程式的<font color="#FF0000"><strong>法化</strong></font>。</p>
<p>上式整理后可得$$A^{T}AX-A^{T}L=A^{T}(AX-L)=0$$</p>
<p>有的地方亦写作$$A^{T}P(A\Delta -L)=0$$Δ与X同含义，而P是测量平差中进行稳健估计而使用的权矩阵，即</p>
<p>$$\begin{bmatrix}P<em>{1}&amp;&amp;&amp;&amp;&amp;\&amp;P</em>{2}&amp;&amp;&amp;&amp;\&amp;&amp;.&amp;&amp;&amp;\&amp;&amp;&amp;.&amp;&amp;\&amp;&amp;&amp;&amp;.&amp;\&amp;&amp;&amp;&amp;&amp;P_{n}\end{bmatrix}$$非主要内容略微说一下测量平差的估值。主要目的是处理含有误差（其中一些误差可能较大，定义为比最大偶然误差还要大的误差，称为粗差）依赖一定的数学模型，包含<font color="#FF0000"><strong>函数模型和随即模型</strong></font>，按照某种估计准则，求出未知参数的<font color="#FF0000"><strong>最优估值</strong></font>，并评定其精度。当粗差归为函数模型，粗差表现为观测量误差绝对值较大且偏离群体，处理思想是在正式进行最小二乘平差之前探测和定位粗差，然后剔除含有粗差的观测值，得到一组比较净化的观测值，模型为<font color="#FF0000"><strong>均值漂移模型</strong></font>；将粗差归为随机模型，粗差即表现为先验随机模型和实际随机模型的差异过大，处理方法为根据逐次迭代平差的结果不断地改变观测值的权或者方差，最终使粗差观测值的权趋于零或者方差趋于无穷大，模型为<font color="#FF0000"><strong>方差膨胀模型</strong></font>。</p>
<p>该方法的实践逻辑是由于不大准确知道观测数据中有效信息和有害信息所占的比例及其它们具体包含在哪些观测中，要冒着损失一些效率的风险，去获得较可靠的、具有实际意义的、较有效的估值。针对极大似然估计的稳健估计模型主要使用M估计。而M估计应用最广的是选权迭代法。而P可以使等权独立观测的P=I，也可以是权函数矩阵代替观测权阵P。这里不展开来讲。</p>
<p>法化后的方程称为<font color="#FF0000"><strong>法方程式</strong></font>，一般写作</p>
<p>$$NX=A^{T}L$$,其中$N=A^{T}A$也把<font color="#FF0000"><strong>N称为法方程的系数</strong>。</font></p>
<p>上两式就是法方程，也是△Xs，△Ys，△Zs，△k，△φ，△ω的解。</p>
<font color="#FF0000"><strong>答解改正数</strong></font>：$$X=(A^{T}A)^{-1}A^{T}L$$或$$\Delta =(A^{T}PA)^{-1}A^{T}PL$$<br><br>计算每一步<font color="#FF0000"><strong>迭代值</strong></font>：$$X<em>{s}^{k+1}=X</em>{s}^{k}+dXs^{k+1},Y<em>{s}^{k+1}=Y</em>{s}^{k}+dYs^{k+1},Z<em>{s}^{k+1}=Z</em>{s}^{k}+dZs^{k+1}$$<br><br>$$\varphi ^{k+1}=\varphi ^{k}+d\varphi ^{k+1},\omega ^{k+1}=\omega ^{k}+d\omega ^{k+1},\kappa ^{k+1}=\kappa ^{k}+d\kappa ^{k+1}$$<br><br>这里注意，<font color="#FF0000"><strong>平坦地区不适宜内外元素同时答解</strong></font>，因为dXs0与dx0相关，dYs0与dy0相关。<br><br>空间后方交会的平面二维坐标的选点，应尽可能的布满整个区域。或者覆盖中心和边缘的更全面的位置，如图。不均匀以及不足够数量的控制点参与迭代会极大的影响最终计算的精度。<br><br><img src="http://ww4.sinaimg.cn/large/68eb7c93gw1exesrtmyzlj20rr0iiq5q.jpg" alt=""><br><br><font color="#FF0000"><strong>具体的迭代流程</strong></font>如下：<br><br><font color="#FF0000">①确定各未知数的初值$$X<em>{s}^{0},Y</em>{s}^{0},Z_{s}^{0},\varphi ^{0},\omega ^{0},\kappa ^{0}$$</font>

<font color="#FF0000">②对每个控制点计算误差方程系数aij和lx、ly。按照最上面的公式列出误差方程。</font>

<font color="#FF0000">③答解线性方程组，得到△Xs，△Ys，△Zs，△k，△ω，△φ</font>

<font color="#FF0000">④将增量△和初值相加，得到新的一个外方位元素。</font>

<font color="#FF0000">⑤各个增量△与一个给定的限差作比较，若小于则停止迭代运算；若不是则重复②到⑤</font>

<p>分别对上式各步骤进行解释：</p>
<p>①$$X<em>{s}^{0},Y</em>{s}^{0}$$可以利用X Y的物方点均值设置，$$Z_{s}^{0}$$一般为H即航摄高度，有时也用mf表示。m是航摄比例尺，f是相机焦距。这些值也可以直接给定某个初值。三个角元素则一般设为0,k有时可根据航迹图给定。</p>
<p>②该步骤可分解为计算旋转矩阵R（R的具体值参考下文）、计算得到的变换坐标$$\overline{X},\overline{Y},\overline{Z}$$（其实就是地面辅助坐标系的坐标）、计算x计、y计（即由<font color="#FF0000"><strong>相应地面坐标点</strong></font>和<font color="#FF0000"><strong>外方位元素</strong></font>计算得到的像点坐标，$$x<em>{cal}=-f\frac{\overline{X}}{\overline{Z}}$$,$$y</em>{cal}=-f\frac{\overline{Y}}{\overline{Z}}$$）、计算误差方程各项系数、组成误差方程V=AX-L</p>
<p>③该步骤其实就是矩阵运算，求出$A^{T}PA$   ($A^{T}A$) 及其逆矩阵。求出$A^{T}L$ ($A^{T}PL$)，两式相乘求取X[△Xs,△Ys,△Zs,△k,△ω,△φ]</p>
<p>④根据改正数的值加上上一步的值得到各项新值。</p>
<p>⑤检查是否收敛时，一般只对角元素改正数设定限差，为0.1’（按弧度值是<span style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FLOAT: none; COLOR: rgb(0,0,0); TEXT-ALIGN: left; FONT: 13px/30px arial; WIDOWS: 1; DISPLAY: inline !important; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">0.0000291rad</span>）当三个角改正数都小于限差时迭代结束。</p>
<p>&nbsp;</p>
<p>平差理论中，单位权中的误差为</p>
<p>$$m<em>{0}=\sqrt{\frac{\sum v</em>{i}^{2}}{2n-t}}$$其中m0为单位权中误差。vi是第i个方程的残差，n是控制点个数，t是未知数个数。只解求外方位精度则只有6个精度。</p>
<p>根据传播定律，$$m^{2}=N^{-1}m_{0}^{2}$$式中$N^{-1}$是法方程系数矩阵的逆矩阵。即</p>
<p>$$N^{-1}=\begin{bmatrix}Q<em>{11}&amp;Q</em>{12}&amp;.&amp;.&amp;.&amp;Q<em>{1t}\Q</em>{21}&amp;Q<em>{22}&amp;.&amp;.&amp;.&amp;Q</em>{2t}\.&amp;.&amp;&amp;.&amp;&amp;.\.&amp;.&amp;&amp;.&amp;&amp;.\.&amp;.&amp;&amp;.&amp;&amp;.\Q<em>{t1}&amp;Q</em>{t2}&amp;.&amp;.&amp;.&amp;Q_{tt}\end{bmatrix}$$,则<font color="#FF0000"><strong>第i个未知数中的误差</strong></font>为:</p>
<p>$$m<em>{i}=\sqrt{Q</em>{ii}}m<em>{0}$$,其中$Q</em>{ii}$为$N^{-1}$的各项系数的对角元素,也称为第i个未知数的权倒数。</p>
<p>——<strong><font color="#FF0000">一点说明</font></strong></p>
<p>再次声明，无论半片还是全片，增加控制点都可以提高精度，但精度提高的不是很大；采用相同数量控制点，全片比半片精度成倍的提高，分布良好更有利于精度改善。</p>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/10/后方交会检校(1)/" itemprop="url">
                  后方交会检校(1)--前景 共线方程及其线性化
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-10T23:29:57+08:00" content="2015-10-10">
              2015-10-10
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/" itemprop="url" rel="index">
                    <span itemprop="name">什么都学一下</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/什么都学一下/学习log/" itemprop="url" rel="index">
                    <span itemprop="name">学习log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/10/后方交会检校(1)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/10/后方交会检校(1)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>各种文档看得累。条理不清结构不明缺斤少两。决定自己总结一个。（公式较多，墙外浏览更顺哟）</p>
<p> 一些注意</p>
<p><strong>   后方交会是为了获取影像的内外方位数据，其中外方位数据可以通过GPS、INS（惯性导航系统）、雷达、星相摄像机来获取；然而由于穷穷穷，只能利用影响覆盖范围内的一定控制点来计算空间坐标与影响坐标之间的关系，来反算外方位元素。
</strong>   多片检校基于单片检校。在矩阵组合时分别解算外方位元素。但使用同一组内方位元素。在一个大矩阵内进行。<br><strong>   后方交会可以只检校外方位元素。当需要进行畸变差校正时（即畸变差不可忽略时），可在方程中加入畸变差项进行迭代；当需要进行内方位元素检校时（即内方位元素精度没有达到需求），可在方程中加入内方位元素进行迭代。
</strong>   对于畸变差校正，包括径向畸变、切向畸变、薄棱镜畸变，其中多数情况考察径向畸变的前两项系数k1 k2和切向畸变p1 p2 ，在某些组合相机的畸变模型中，还包括α像素非正方形比例和βccd非正交性畸变系数。<br><strong>   对于内方位元素检校，有的地方将f分为fx和fy即f在坐标两个方向上的像素值（由于有的xy不是同一比例尺即不是正方形）
</strong>   检校，就是纠正相机各个方面的误差和精度，可以得到相机内部的主点、焦距、畸变的客观信息，这些信息在大部分情况下不会轻易改变；而相机外部的空间位置时时刻刻都在改变，但一些论文指出，在焦距变化、空间位置变化、移轴、高空拍摄情况下，相机的焦距、主点位置也会随之或多或少的改变，因此迭代时最好能带上这些参数一起进行平差。<br>*</p>
<p> 一些重要概念</p>
<p><strong>   后方交会基于<span style="COLOR: #ff0000"></span></strong>共线方程<em>*，物理含义为同一个三维坐标系中投影中心、物方点、像平面投影的点在同一条直线上。
</em></p>
<p> $$!x-x<em>{0}=-f\cdot \frac{a</em>{1}(X-X<em>{s})+b</em>{1}(Y-Y<em>{s})+c</em>{1}(Z-Z<em>{s})}{a</em>{3}(X-X<em>{s})+b</em>{3}(Y-Y<em>{s})+c</em>{3}(Z-Z_{s})}$$</p>
<p> $$!y-y<em>{0}=-f\cdot \frac{a</em>{2}(X-X<em>{s})+b</em>{2}(Y-Y<em>{s})+c</em>{2}(Z-Z<em>{s})}{a</em>{3}(X-X<em>{s})+b</em>{3}(Y-Y<em>{s})+c</em>{3}(Z-Z_{s})}$$</p>
<p> 上式中，包含留个外方位元素，即Xs、Ys、Zs、φ、Ω、k。只有确定了六个外方位元素，才能确定摄影中心在物方空间的位置。a1、a2、a3、b1、b2、b3、c1、c2、c3是需要计算的直线方程的系数，其物理性质是3个外方位角元素组成的9个方向余弦。该方程利用了相似三角形的性质；f是焦距长，X Y Z均值控制点的测量坐标，默认为精确的，因此物方控制点测量的精度很大程度上决定了最后检校的精度；x y是X Y Z对应的像平面的坐标，x0，y0是主点在像平面的坐标，有时当作已知并不再改变，有时也参与迭代计算。</p>
<p> 共线条件方程用途有：</p>
<p>1.2.  单像、多像空间后方交会；多像空间前方交会<br>3.4.  解析空中三角测量的光束法平差<br>5.6.  数字投影的基础<br>7.8.  计算模拟影像数据（已知内外方位元素和物方坐标点求像点）<br>9.10.  DEM与共线方程制作正射影像<br>11.12.  DEM与共线方程进行单幅影像测图<br>13.</p>
<blockquote>
<p><strong>注意 一个方程代表一个点在像平面和物方世界的关系，因此一个点对应两个方程，若有n个控制点，则对应2n个方程</strong></p>
</blockquote>
<p> 若f x0 y0当作已知，则有外方位元素6个未知数，因此需要6个方程，即3个控制点的方程；若f x0 y0当作位置，则有9个未知数，因此需要至少5个控制点的方程。当然，很多文章也指出，<strong>越多的冗余数据</strong>参与计算得到的结果也越精确；<strong>越多的像片</strong>参与计算，得到的结果越精确；<strong>更均匀的控制点分布</strong>，能更多的控制整张像片，均匀的分布在边缘，得到的结果更精确。</p>
<p> 一般情况下，令<br> $$!\overline{X}=a<em>{1}(X-X</em>{s})+b<em>{1}(Y-Y</em>{s})+c<em>{1}(Z-Z</em>{s})$$</p>
<p>$$!\overline{Y}=a<em>{2}(X-X</em>{s})+b<em>{2}(Y-Y</em>{s})+c<em>{2}(Z-Z</em>{s})$$</p>
<p>$$!\overline{Z}=a<em>{3}(X-X</em>{s})+b<em>{3}(Y-Y</em>{s})+c<em>{3}(Z-Z</em>{s})$$</p>
<p> 而用矩阵的形式可以表示为：</p>
<p> $$!\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}=\begin{pmatrix}a<em>{1}&amp;b</em>{1}&amp;c<em>{1}\a</em>{2}&amp;b<em>{2}&amp;c</em>{2}\a<em>{3}&amp;b</em>{3}&amp;c_{3}\end{pmatrix}\cdot\begin{pmatrix}X-Xs\Y-Ys\Z-Zs\end{pmatrix}=R^{T}\begin{pmatrix}X-Xs\Y-Ys\Z-Zs\end{pmatrix}$$</p>
<p>这里R是旋转矩阵，且$$R^{T}=R^{-1}$$,行列式的值为0，即任意元素等于其代数余子式的值.则共线方程变为：</p>
<p> $$!x-x_{0}=-f\cdot \frac{\overline{X}}{\overline{Z}}$$</p>
<p>$$!y-y_{0}=-f\cdot \frac{\overline{Y}}{\overline{Z}}$$</p>
<p> 由于上式是共线方程的变形，因此Fx和Fy是六个外方位元素为参数的函数。由于方程是非线性的，因此不能解求数值，<strong>需要对方程进行线性化</strong>。思路是，对上式按泰勒级数在初值处展开并保留一次项，将非线性方程转化为各参数<span style="COLOR: #ff0000"><strong>改正数</strong></span>的线性方程</p>
<p> 设<span style="COLOR: #ff0000">初值</span>为$$!X<em>{S}^{0},X</em>{S}^{0},Z<em>{S}^{0},\varphi^{0},\omega^{0},\kappa {0},X^{0},Y^{0},Z^{0},x</em>{0}^{0},y_{0}^{0},f^{0}$$</p>
<p> 相应的<span style="COLOR: #ff0000">改正数</span>为</p>
<p> $$!dXs=\triangle Xs=Xs-Xs^{0},dYs=\triangle Ys=Ys-Ys^{0},dZs=\triangle Zs=Zs-Zs^{0}$$</p>
<p> $$!d\varphi=\triangle \varphi=\varphi-\varphi^{0},d\omega=\triangle \omega=\omega-\omega^{0},d\kappa=\triangle \kappa=\kappa-\kappa^{0}$$</p>
<p> $$!dX=\triangle X=X-X^{0},dY=\triangle Y=Y-Y^{0},dZ=\triangle Z=Z-Z^{0}$$</p>
<p> &nbsp;则<font color="#FF0000" size="5">共线方程的泰勒一次展开一般式</font>为<font color="#FF0000" size="5">①</font></p>
<p> $$!x=(x)+\frac{\partial x}{\partial Xs}dXs+\frac{\partial x}{\partial Ys}dYs+\frac{\partial x}{\partial Zs}dZs+\frac{\partial x}{\partial \varphi }d\varphi +\frac{\partial x}{\partial \omega }d\omega +\frac{\partial x}{\partial \kappa }d\kappa +\frac{\partial x}{\partial X}dX+\frac{\partial x}{\partial Y}dY+\frac{\partial x}{\partial x<em>{0}}dx</em>{0}+\frac{\partial x}{\partial y<em>{0}}dy</em>{0}+\frac{\partial x}{\partial f}df$$</p>
<p>$$!y=(y)+\frac{\partial y}{\partial Xs}dXs+\frac{\partial y}{\partial Ys}dYs+\frac{\partial y}{\partial Zs}dZs+\frac{\partial y}{\partial \varphi }d\varphi +\frac{\partial y}{\partial \omega }d\omega +\frac{\partial y}{\partial \kappa }d\kappa +\frac{\partial y}{\partial X}dX+\frac{\partial y}{\partial Y}dY+\frac{\partial y}{\partial x<em>{0}}dx</em>{0}+\frac{\partial y}{\partial y<em>{0}}dy</em>{0}+\frac{\partial y}{\partial f}df$$</p>
<p>这是一个重要的总结性公式。(x)(y)分别是内方位元素x，y的初值。式中包含了所有内外元素和物放测量点。当进行不同矩阵运算时，可以选择需要的精度不足够的进行迭代计算。</p>
<p>其中，对x和y求各未知项的偏导：</p>
<p> $$!\frac{\partial x}{\partial Xs}=-f\cdot \frac{\frac{\partial \overline{X}}{\partial Xs}\overline{Z}-\frac{\partial \overline{Z}}{\partial Xs}\overline{X}}{\overline{Z}^{2}}=-\frac{f}{\overline{Z}^{2}}(-a<em>{1}\overline{Z}+a</em>{3}\overline{X})=\frac{1}{\overline{Z}}[a<em>{1}f-a</em>{3}f\frac{\overline{X}}{\overline{Z}}]=\frac{1}{\overline{Z}}[a<em>{1}f+a</em>{3}(x-x_{0})]$$</p>
<p> 同理，其他的偏导为</p>
<p> $$!\frac{\partial x}{\partial Ys}=\frac{1}{\overline{Z}}[b<em>{1}f+b</em>{3}(x-x_{0})]$$</p>
<p> $$!\frac{\partial x}{\partial Zs}=\frac{1}{\overline{Z}}[c<em>{1}f+b</em>{3}(x-x_{0})]$$</p>
<p> $$!\frac{\partial y}{\partial Xs}=\frac{1}{\overline{Z}}[a<em>{2}f+a</em>{3}(x-x_{0})]$$</p>
<p> $$!\frac{\partial y}{\partial Ys}=\frac{1}{\overline{Z}}[b<em>{2}f+b</em>{3}(x-x_{0})]$$</p>
<p> $$!\frac{\partial y}{\partial Zs}=\frac{1}{\overline{Z}}[c<em>{2}f+c</em>{3}(x-x_{0})]$$</p>
<p> $$!\frac{\partial x}{\partial f}=\frac{x-x_{0}}{f}=-\frac{\overline{X}}{\overline{Z}}$$</p>
<p>$$!\frac{\partial y}{\partial f}=\frac{y-y_{0}}{f}=-\frac{\overline{Y}}{\overline{Z}}$$</p>
<p>$$!\frac{\partial x}{\partial x<em>{0}}=1,\frac{\partial x}{\partial y</em>{0}}=0$$</p>
<p>$$!\frac{\partial y}{\partial x<em>{0}}=0,\frac{\partial y}{\partial y</em>{0}}=1$$</p>
<p> 这里相对比较难解决的是角元素的偏导，关于角度的问题可以参考第三篇。</p>
<p> 角度的变换在这里不再详述，两个坐标系之间的转换可以归结为变换矩阵的求取。三个角元素共同构成了矩阵的元素确定。</p>
<p> 由于</p>
<p>$$!R^{T}=R<em>{\kappa }^{T}R</em>{\omega }^{T}R_{\varphi }^{T} $$</p>
<p>因而，难度转到求取$$\overline{X}\overline{Y} \overline{Z} $$对角元素的偏导上。对角元素求偏导可以分为三个步骤：</p>
<p>①求各个方向余弦$$a<em>{i},b</em>{i},c_{i}$$对ω、k、φ的偏导数。共27个。</p>
<p>②求$$\overline{X},\overline{Y},\overline{Z}$$对ω、k、φ的偏导数，共9个。</p>
<p>③求x、y对ω、k、φ的偏导数，共6个。</p>
<p>如下是$$\overline{X},\overline{Y},\overline{Z}$$对φ的偏导，三个参数写在矩阵中，有的地方也展开写成每一项的等式形式。</p>
<p>$$!\frac{\partial }{\partial \varphi }\begin{pmatrix}\overline{X}\\overline{Y}\\overline{Z}\end{pmatrix}=R<em>{\kappa }^{T}R</em>{\omega }^{T}\frac{\partial R<em>{\varphi }^{T}}{\partial \varphi }\begin{pmatrix}X-Xs\ Y-Ys\ Z-Zs\end{pmatrix}=R</em>{\kappa }^{T}R<em>{\omega }^{T}\frac{\partial R</em>{\varphi }^{T}}{\partial \varphi }(R^{T})^{-1}\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}=R<em>{\kappa }^{T}R</em>{\omega }^{T}\frac{\partial R<em>{\varphi }^{T}}{\partial \varphi }R\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}=R</em>{\kappa }^{T}R<em>{\omega }^{T}(R</em>{\varphi }^{T}R<em>{\varphi })\frac{\partial R</em>{\varphi }^{T}}{\partial \varphi }R\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}=R^{T}R<em>{\varphi }\frac{\partial R</em>{\varphi }^{T}}{\partial \varphi }R\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}$$</p>
<p>带入具体系数，上式可变形为</p>
<p>$$!\begin{pmatrix}a<em>{1} &amp; b</em>{1} &amp; c<em>{1}\a</em>{2} &amp; b<em>{2} &amp; c</em>{2}\a<em>{3} &amp; b</em>{3} &amp; c<em>{3}\end{pmatrix}\begin{pmatrix}0 &amp; 0 &amp;1\0 &amp; 0 &amp; 0\-1 &amp; 0 &amp; 0\end{pmatrix}\begin{pmatrix}a</em>{1} &amp; a<em>{2} &amp; a</em>{3}\b<em>{1} &amp; b</em>{2} &amp; b<em>{3}\c</em>{1} &amp; c<em>{2}&amp;c</em>{3} \end{pmatrix}\begin{pmatrix}\overline{X}\\overline{Y}\\overline{Z} \end{pmatrix}=\begin{pmatrix}0 &amp;-a<em>{2}c</em>{1}+a<em>{1}c</em>{2}&amp;-a<em>{3}c</em>{1}+a<em>{1}c</em>{3}\-a<em>{1}c</em>{2}+a<em>{2}c</em>{1} &amp; 0 &amp; -a<em>{3}c</em>{2}+a<em>{2}c</em>{3}\ -a<em>{1}c</em>{3}+a<em>{3}c</em>{1}&amp; -a<em>{2}c</em>{3}+a<em>{3}c</em>{2} &amp;0\end{pmatrix}\begin{pmatrix}\overline{X}\\overline{Y}\\overline{Z} \end{pmatrix}=\begin{pmatrix}0 &amp; -b<em>{3} &amp; b</em>{2}\b<em>{3}&amp;0&amp;-b</em>{1}\-b<em>{2}&amp;b</em>{1}&amp;0\end{pmatrix}\begin{pmatrix}\overline{X}\\overline{Y}\\overline{Z} \end{pmatrix}$$</p>
<p>其中利用了旋转矩阵一个元素的值<font color="#FF0000">等于代数余子式的值</font>。如下是$$\overline{X},\overline{Y},\overline{Z}$$对ω的偏导。</p>
<p>$$!\frac{\partial }{\partial \omega }\begin{pmatrix}\overline{X}\\overline{Y}\\overline{Z}\end{pmatrix}=R<em>{\kappa }^{T}\frac{\partial R</em>{\omega}^{T}}{\partial \omega }R<em>{\varphi }^{T}\begin{pmatrix}X-Xs\Y-Ys\Z-Zs\end{pmatrix}=R</em>{\kappa}^{T}\frac{\partial R<em>{\omega }^{T}}{\partial \omega }R</em>{\varphi }^{T}(R<em>{\varphi }R</em>{\omega }R<em>{\kappa })\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}=R</em>{\kappa }^{T}\frac{\partial R<em>{\omega }^{T}}{\partial \omega}R</em>{\omega }R_{\kappa }\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}=\begin{pmatrix}0&amp;0&amp;sin\kappa\ 0&amp;0&amp;cos\kappa\-sin\kappa&amp;-cos \kappa&amp;0\end{pmatrix}\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}$$其中，这里用到了</p>
<p>$$!\begin{pmatrix}\overline{X}\\overline{Y}\\overline{Z}\end{pmatrix}=R^{T}\begin{pmatrix}X-Xs\Y-Ys\Z-Zs\end{pmatrix}=(R<em>{\varphi}R</em>{\omega}R<em>{\kappa })^{T}\begin{pmatrix}X-Xs\Y-Ys\Z-Zs\end{pmatrix}=R</em>{\kappa }^{T}R<em>{\omega }^{T}R</em>{\varphi }^{T}\begin{pmatrix}X-Xs\Y-Ys\Z-Zs\end{pmatrix}$$</p>
<p>$$!\begin{pmatrix}X-Xs\Y-Ys\Z-Zs\end{pmatrix}=(R^{T})^{-1}\begin{pmatrix}\overline{X}\\overline{Y}\\overline{Z}\end{pmatrix}=R\begin{pmatrix}\overline{X}\\overline{Y}\\overline{Z}\end{pmatrix}=R<em>{\varphi }R</em>{\omega }R_{\kappa }\begin{pmatrix}\overline{X}\\overline{Y}\\overline{Z}\end{pmatrix}$$</p>
<p>如下是$$\overline{X},\overline{Y},\overline{Z}$$对k的偏导。</p>
<p>$$!\frac{\partial }{\partial \kappa }\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}=\frac{\partial R<em>{\kappa }^{T}}{\partial \kappa }R</em>{\omega }^{T}R<em>{\varphi }^{T}\begin{pmatrix}X-Xs\Y-Ys\Z-Zs\end{pmatrix}=\frac{\partial R</em>{\kappa }^{T}}{\partial \kappa }(R<em>{\kappa }R</em>{\kappa }^{T})R<em>{\omega }^{T}R</em>{\varphi }^{T}\begin{pmatrix}X-Xs\Y-Ys\Z-Zs\end{pmatrix}=\frac{\partial R<em>{\kappa }^{T}}{\partial \kappa }R</em>{\kappa }\begin{pmatrix}\overline{X}\ \overline{Y}\ \overline{Z}\end{pmatrix}=\begin{pmatrix}\overline{Y}\ -\overline{X}\0\end{pmatrix}$$<br> 通过以上三式可得到x和y对各角元素未知数的偏导。有的地方，将x，y先分别除以$$\overline{Z}$$,</p>
<p>这样可以在求取偏导的时候减少计算量。</p>
<p>$$!\frac{\partial x}{\partial \varphi }=-\frac{f}{\overline{Z}^{2}}(\frac{\partial \overleftarrow{X}}{\partial \varphi }\overline{Z}-\frac{\partial \overline{Z}}{\partial \varphi }\overline{X})=-\frac{f}{\overline{Z}^{2}}(-b<em>{3}\overline{Y}+b</em>{2}\overline{Z})\overline{Z}+\frac{f}{\overline{Z}^{2}}(b<em>{2}\overline{X}-b</em>{1}\overline{Y})\overline{X}=-(y-y<em>{0})b</em>{3}-fb<em>{2}-\frac{(x-x</em>{0})^{2}}{f}b<em>{2}+\frac{(x-x</em>{0})(y-y<em>{0})}{f}b</em>{1}=\frac{(x-x<em>{0})(y-y</em>{0})}{f}b<em>{1}-(f+\frac{(x-x</em>{0})^{2}}{f})b<em>{2}-(y-y</em>{0})b_{3}$$其他一次类推</p>
<p>$$!\frac{\partial x}{\partial \omega }=\frac{(x-x<em>{0})^{2}}{f}sin\kappa-\frac{(x-x</em>{0})(y-y_{0})}{f}cos\kappa -fsin\kappa $$</p>
<p>$$!\frac{\partial x}{\partial \kappa }=y-y_{0}$$</p>
<p>$$!\frac{\partial y}{\partial \varphi }=(f+\frac{(y-y<em>{0}^{2})}{f})b</em>{1}-\frac{(x-x<em>{0})(y-y</em>{0})}{f}b<em>{2}-(x-x</em>{0})b_{3}$$</p>
<p>$$!\frac{\partial y}{\partial \omega }=-\frac{(x-x<em>{0})(y-y</em>{0})}{f}sin\kappa -\frac{(y-y_{0})^{2}}{f}cos\kappa -fcos\kappa $$</p>
<p>$$!\frac{\partial y}{\partial \kappa }=-(x-x_{0})$$</p>
<p>以上求出了所有的偏导，则①式的公式可变为<font color="#FF0000" size="5">更重要的</font>式<font color="#FF0000">②</font></p>
<p>$$!c<em>{11}dXs+c</em>{12}dYs+c<em>{13}dZs+c</em>{14}d\phi +c<em>{15}d\omega +c</em>{16}d\kappa -c<em>{11}dX-c</em>{12}dY-c<em>{13}dZ+c</em>{17}df+c<em>{18}dx</em>{0}+c<em>{19}dy</em>{0}-lx=0$$</p>
<p>$$!c<em>{21}dXs+c</em>{22}dYs+c<em>{23}dZs+c</em>{24}d\phi +c<em>{25}d\omega +c</em>{26}d\kappa -c<em>{21}dX-c</em>{22}dY-c<em>{23}dZ+c</em>{27}df+c<em>{28}dx</em>{0}+c<em>{29}dy</em>{0}-ly=0$$这里可以看到，Xs和X Ys和Y Zs和Z的偏导互为相反数，因此12个未知数只需要求解9个。 其中c的系数分别为：</p>
<p>$$!c<em>{11}=\frac{1}{\overline{Z}}(a</em>{1}f+a<em>{3}(x-x</em>{0}))$$</p>
<p>$$!c<em>{12}=\frac{1}{\overline{Z}}(b</em>{1}f+b<em>{3}(x-x</em>{0}))$$</p>
<p>$$!c<em>{13}=\frac{1}{\overline{Z}}(c</em>{1}f+c<em>{3}(x-x</em>{0}))$$</p>
<p>$$!c<em>{14}=\frac{(x-x</em>{0})(y-y<em>{0})}{f}b</em>{1}-(f+\frac{(x-x<em>{0})^{2}}{f})b</em>{2}-(y-y<em>{0})b</em>{3}$$</p>
<p>$$!c<em>{15}=-\frac{(x-x</em>{0})^{2}}{f}sin\kappa -\frac{(x-x<em>{0})(y-y</em>{0})}{f}cos\kappa -fsin\kappa$$</p>
<p>$$!c<em>{16}=y-y</em>{0}$$</p>
<p>$$!c<em>{17}=\frac{x-x</em>{0}}{f},c<em>{18}=1,c</em>{19}=0,lx=x-x_{cal}$$</p>
<p>&nbsp;</p>
<p>$$!c<em>{21}=\frac{1}{\overline{Z}}(a</em>{2}f+a<em>{3}(y-y</em>{0}))$$</p>
<p>$$!c<em>{22}=\frac{1}{\overline{Z}}(b</em>{2}f+b<em>{3}(y-y</em>{0}))$$</p>
<p>$$!c<em>{23}=\frac{1}{\overline{Z}}(c</em>{2}f+c<em>{3}(y-y</em>{0}))$$</p>
<p>$$!c<em>{24}=(f+\frac{(y-y</em>{0})^{2}}{f})b<em>{1}-\frac{(x-x</em>{0})(y-y<em>{0})}{f}b</em>{2}+(x-x<em>{0})b</em>{3}$$</p>
<p>$$!c<em>{25}=-\frac{(x-x</em>{0})(y-y<em>{0})}{f}sin\kappa -\frac{(y-y</em>{0})^{2}}{f}cos\kappa -fcos\kappa ,c<em>{26}=-(x-x</em>{0})$$</p>
<p>$$!c<em>{17}=\frac{y-y</em>{0}}{f},c<em>{28}=0,c</em>{29}=1,ly=y-y_{cal}$$</p>
<p>在正摄影像近似垂直时，可以采用φ≈ω≈k≈0,$$\overline{Z}\approx -H$$的取值带入系数中，则②式可化简为<font color="#FF0000">本篇最终的结果式③</font>：</p>
<p>$$!\left{\begin{matrix}v<em>{x}=-\frac{f}{H}dXs-\frac{x-x</em>{0}}{H}dZs-[f+\frac{(x-x<em>{0})^{2}}{f}]d\varphi-\frac{(x-x</em>{0})(y-y<em>{0})}{f}d\omega+(y-y</em>{0})d\kappa+\frac{f}{H}dX+\frac{x-x<em>{0}}{H}dZ+\frac{x-x</em>{0}}{f}df+dx<em>{0}-(x-x</em>{cal})\v<em>{y}=-\frac{f}{H}dYs-\frac{y-y</em>{0}}{H}dZs-\frac{(x-x<em>{0})(y-y</em>{0})}{f}d\varphi-[f+\frac{(y-y<em>{0})^{2}}{f}]d\omega+(x-x</em>{0})d\kappa+\frac{f}{H}dY+\frac{y-y<em>{0}}{H}dZ+\frac{y-y</em>{0}}{f}df+dy<em>{0}-(y-y</em>{cal})\end{matrix}\right.$$</p>
<p>式中相对①式添加了改正项，为了平衡一次项以下的展开式对结果的影响，是平差方程中重要的一部。误差方程将在下文提到。</p>
<div class="PoweredByWebStory" style="margin-top:15px;margin-bottom:10px"><a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external"></a>&nbsp;今天你<a href="http://sns.juziyue.com/webinvite.php?u=94887" target="_blank" rel="external">菊子曰</a>了么？</div>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/09/红包在哪里/" itemprop="url">
                  红包在哪里
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-09T02:16:05+08:00" content="2015-10-09">
              2015-10-09
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/槽/" itemprop="url" rel="index">
                    <span itemprop="name">槽</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/09/红包在哪里/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/09/红包在哪里/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在 2015 年这一年，这种从相杀到相爱的事情已经发生了三次：<br>2015 年 2 月 14 日，滴滴和快的宣布合并；<br>2015 年 4 月 17 日，58 与赶集宣布合并；<br>2015 年 10 月 8 日，美团与大众点评宣布合并。</p>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/xiaozaizi.png" alt="Jay Wang">
          <p class="site-author-name" itemprop="name">Jay Wang</p>
          <p class="site-description motion-element" itemprop="description">你猜?</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">105</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">60</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ovjaywang" target="_blank" title="GitHub">
                  
                    <i class="fa fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/302060345" target="_blank" title="Weibo">
                  
                    <i class="fa fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/ov_beeshoot" target="_blank" title="douban">
                  
                    <i class="fa fa-globe"></i>
                  
                  douban
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.instagram.com/ohahabienaola" target="_blank" title="Instagram">
                  
                    <i class="fa fa-instagram"></i>
                  
                  Instagram
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://plus.google.com/112912013380614886638" target="_blank" title="Google">
                  
                    <i class="fa fa-google"></i>
                  
                  Google
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jay Wang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"mimimomo"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax --><!-- hexo-inject:end -->


</body>
</html>